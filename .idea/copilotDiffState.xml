<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/frontend/app-main.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/app-main.js" />
              <option name="originalContent" value="// Modern notification system&#10;let notificationId = 0;&#10;&#10;function notify(msg, type='success') {&#10;  const container = document.getElementById('notificationContainer');&#10;  if (!container) {&#10;    // Fallback to old notification system&#10;    let n = document.getElementById('notifyBar');&#10;    n.innerText = msg;&#10;    n.className = 'alert alert-' + type;&#10;    n.style.display = 'block';&#10;    setTimeout(() =&gt; n.style.display = 'none', 2200);&#10;    return;&#10;  }&#10;&#10;  const id = `notification-${notificationId++}`;&#10;  const notification = document.createElement('div');&#10;  notification.className = `notification ${type}`;&#10;  notification.id = id;&#10;  &#10;  // Add icon based on type&#10;  let iconClass = '';&#10;  switch(type) {&#10;    case 'success':&#10;      iconClass = 'fas fa-check-circle';&#10;      break;&#10;    case 'warning':&#10;      iconClass = 'fas fa-exclamation-circle';&#10;      break;&#10;    case 'danger':&#10;      iconClass = 'fas fa-times-circle';&#10;      break;&#10;    case 'info':&#10;      iconClass = 'fas fa-info-circle';&#10;      break;&#10;    default:&#10;      iconClass = 'fas fa-bell';&#10;  }&#10;  &#10;  notification.innerHTML = `&#10;    &lt;div class=&quot;notification-icon&quot;&gt;&#10;      &lt;i class=&quot;${iconClass}&quot;&gt;&lt;/i&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;notification-content&quot;&gt;${msg}&lt;/div&gt;&#10;    &lt;div class=&quot;notification-close&quot; onclick=&quot;closeNotification('${id}')&quot;&gt;&#10;      &lt;i class=&quot;fas fa-times&quot;&gt;&lt;/i&gt;&#10;    &lt;/div&gt;&#10;  `;&#10;  &#10;  container.appendChild(notification);&#10;  &#10;  // Trigger show animation&#10;  setTimeout(() =&gt; {&#10;    notification.classList.add('show');&#10;  }, 10);&#10;  &#10;  // Auto close after 3 seconds&#10;  setTimeout(() =&gt; {&#10;    closeNotification(id);&#10;  }, 3000);&#10;}&#10;&#10;function closeNotification(id) {&#10;  const notification = document.getElementById(id);&#10;  if (notification) {&#10;    notification.classList.remove('show');&#10;    setTimeout(() =&gt; {&#10;      notification.remove();&#10;    }, 300);&#10;  }&#10;}&#10;&#10;// ---- Vue 3 应用（完整） ----&#10;if(window.Vue){&#10;  const { createApp, ref, reactive } = Vue;&#10;  const app = createApp({&#10;    setup(){&#10;      const activities = ref([]);&#10;      const pendingActivities = ref([]); // 待审核活动列表&#10;      const state = reactive({ user: null, view: 'login' });&#10;      const loginForm = reactive({ username: '', password: '' });&#10;      const regForm = reactive({ username: '', password: '', email: '' });&#10;      const profile = reactive({ username: '', email: '', avatar: '/resources/images/default-avatar.jpg' });&#10;      const pwdForm = reactive({ oldPwd: '', newPwd: '' });&#10;      const pubForm = reactive({ activityId: '', name: '', desc: '', location: '', startTime: '', endTime: '', maxNum: 0 });&#10;      const pubFormMsg = ref('');&#10;      const myActs = ref([]);&#10;      const myRegs = ref([]);&#10;      const manageState = reactive({ activityId: '', regs: [], addUserId: '' });&#10;      const selectedActivity = ref(null);&#10;      const previousView = ref('activities'); // 用于返回上一个视图&#10;      const newUser = reactive({ username: '', password: '', email: '', role: 'user', errorMsg: '' }); // 新增用户表单&#10;      const userList = ref([]); // 用户列表&#10;      const editingUser = reactive({ userId: '', username: '', email: '', role: 'user' }); // 编辑中的用户&#10;      const selectedUser = ref(null); // 选中的用户&#10;      const searchKeyword = ref(''); // 搜索关键词&#10;      const newRole = ref('user'); // 新角色&#10;&#10;      // 分页相关数据&#10;      const pagination = reactive({&#10;        page: 1,&#10;        pageSize: 10,&#10;        total: 0,&#10;        totalPages: 0&#10;      });&#10;&#10;      // 活动列表分页数据&#10;      const activityPagination = reactive({&#10;        page: 1,&#10;        pageSize: 10,&#10;        total: 0,&#10;        totalPages: 0&#10;      });&#10;&#10;      const load = async ()=&gt;{&#10;        // 检查是否需要分页&#10;        if (state.view === 'activities') {&#10;          // 活动报名页面使用分页&#10;          await loadActivitiesWithPagination(1, 6);&#10;        } else {&#10;          // 其他情况加载所有活动&#10;          const res = await fetch('/api/activity/list');&#10;          activities.value = await res.json();&#10;        }&#10;      };&#10;&#10;      // 加载分页活动列表&#10;      const loadActivitiesWithPagination = async (page = 1, pageSize = 6) =&gt; {&#10;        try {&#10;          const res = await fetch(`/api/activity/list?page=${page}&amp;pageSize=${pageSize}`);&#10;          const data = await res.json();&#10;&#10;          if (data.activities) {&#10;            activities.value = data.activities;&#10;            // 更新分页信息&#10;            activityPagination.page = data.page;&#10;            activityPagination.pageSize = data.pageSize;&#10;            activityPagination.total = data.total;&#10;            activityPagination.totalPages = data.totalPages;&#10;          } else {&#10;            // 兼容旧的不分页格式&#10;            activities.value = data;&#10;          }&#10;        } catch (error) {&#10;          console.error('加载活动列表失败:', error);&#10;          activities.value = [];&#10;        }&#10;      };&#10;&#10;      // 计算分页页码数组&#10;      const getPageNumbers = () =&gt; {&#10;        const pageNumbers = [];&#10;        // 根据当前视图选择使用哪个分页数据&#10;        let page, totalPages;&#10;        if (state.view === 'activities') {&#10;          // 活动列表使用活动分页数据&#10;          page = activityPagination.page;&#10;          totalPages = activityPagination.totalPages;&#10;        } else if (state.view === 'userManagement') {&#10;          // 用户列表使用用户分页数据&#10;          page = pagination.page;&#10;          totalPages = pagination.totalPages;&#10;        } else {&#10;          return [];&#10;        }&#10;&#10;        let start = Math.max(1, page - 2);&#10;        let end = Math.min(totalPages, page + 2);&#10;&#10;        // 确保显示5个页码（如果可能）&#10;        if (end - start &lt; 4) {&#10;          if (start === 1) {&#10;            end = Math.min(totalPages, start + 4);&#10;          } else {&#10;            start = Math.max(1, end - 4);&#10;          }&#10;        }&#10;&#10;        for (let i = start; i &lt;= end; i++) {&#10;          pageNumbers.push(i);&#10;        }&#10;&#10;        return pageNumbers;&#10;      };&#10;      &#10;      // 加载待审核活动&#10;      const loadPendingActivities = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') return;&#10;        const res = await fetch(`/api/activity/pending?reviewerId=${state.user.userId}`);&#10;        const result = await res.json();&#10;        if (Array.isArray(result)) {&#10;          pendingActivities.value = result;&#10;        } else {&#10;          pendingActivities.value = [];&#10;        }&#10;      };&#10;      &#10;      // 加载所有活动（供管理员在活动管理页面使用）&#10;      const loadAllActivities = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') return;&#10;        const res = await fetch(`/api/activity/all?reviewerId=${state.user.userId}`);&#10;        const result = await res.json();&#10;        if (Array.isArray(result)) {&#10;          pendingActivities.value = result;&#10;        } else {&#10;          pendingActivities.value = [];&#10;        }&#10;      };&#10;      &#10;      // 加载用户列表（支持分页和搜索）&#10;      const loadUserList = async (page = 1, pageSize = 10) =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') return;&#10;        try {&#10;          console.log('正在加载用户列表，页码:', page, '每页数量:', pageSize, '搜索关键词:', searchKeyword.value);&#10;          &#10;          // 构建查询参数&#10;          let queryParams = `adminId=${state.user.userId}&amp;page=${page}&amp;pageSize=${pageSize}`;&#10;          if (searchKeyword.value) {&#10;            queryParams += `&amp;search=${encodeURIComponent(searchKeyword.value)}`;&#10;          }&#10;          &#10;          const res = await fetch(`/api/admin/user/list?${queryParams}`);&#10;          console.log('用户列表响应状态:', res.status);&#10;          if (res.ok) {&#10;            const result = await res.json();&#10;            console.log('用户列表数据:', result);&#10;            if (result.status === 0) {&#10;              // 解析返回的数据&#10;              const userData = JSON.parse(result.data.replace(/\\\\/g, '\\').replace(/\\&quot;/g, '&quot;'));&#10;              if (Array.isArray(userData)) {&#10;                userList.value = userData;&#10;              } else {&#10;                userList.value = [];&#10;              }&#10;              // 更新分页信息&#10;              pagination.total = result.total;&#10;              pagination.page = result.page;&#10;              pagination.pageSize = result.pageSize;&#10;              pagination.totalPages = result.totalPages;&#10;              &#10;              // 清除选中用户&#10;              selectedUser.value = null;&#10;            } else {&#10;              userList.value = [];&#10;            }&#10;          } else {&#10;            console.error('加载用户列表失败，状态码:', res.status);&#10;            userList.value = [];&#10;          }&#10;        } catch (error) {&#10;          console.error('加载用户列表失败:', error);&#10;          userList.value = [];&#10;        }&#10;      };&#10;      &#10;      const refreshUserInfo = async ()=&gt;{&#10;        if(!state.user) return;&#10;        const res = await fetch('/api/user/info',{method:'POST',body:new URLSearchParams({userId:state.user.userId})});&#10;        const d = await res.json();&#10;        profile.username = d.username||'';&#10;        profile.email = d.email||'';&#10;        // 使用 resources 下的默认头像作为兜底（与后端默认路径一致）&#10;        profile.avatar = (d.avatar || '/resources/images/default-avatar.jpg');&#10;      };&#10;      const doLogin = async ()=&gt;{&#10;        const p = new URLSearchParams({username:loginForm.username,password:loginForm.password});&#10;        const r = await fetch('/api/login',{method:'POST',body:p});&#10;        const d = await r.json();&#10;        if(d.status===0){&#10;          state.user=d; window.user=d; state.view='activities';&#10;          await load(); await refreshUserInfo();&#10;          await loadMyActs(); await loadMyRegs();&#10;          notify('登录成功');&#10;        } else notify(d.msg||'登录失败','danger');&#10;      };&#10;      const doRegister = async ()=&gt;{&#10;        const p = new URLSearchParams({username:regForm.username,password:regForm.password,email:regForm.email});&#10;        const r = await fetch('/api/register',{method:'POST',body:p});&#10;        const d = await r.json();&#10;        if(d.status===0){ notify('注册成功，请登录'); state.view='login'; }&#10;        else notify(d.msg||'注册失败','danger');&#10;      };&#10;      const logout = ()=&gt;{ state.user=null; window.user=null; state.view='welcome'; myActs.value = []; myRegs.value = []; pendingActivities.value = []; notify('已退出'); };&#10;      const updateInfo = async ()=&gt;{&#10;        if(!state.user) return;&#10;        const p = new URLSearchParams({userId:state.user.userId,username:profile.username,email:profile.email,avatar:profile.avatar});&#10;        const r = await fetch('/api/user/update',{method:'POST',body:p});&#10;        const d = await r.json();&#10;        if(d.status===0){ state.user.username=profile.username; notify('资料已保存','success'); await load(); } // 更新资料后刷新活动列表&#10;        else notify('修改失败，用户名可能已存在','danger');&#10;      };&#10;      const uploadAvatar = async (ev)=&gt;{&#10;        if(!state.user) return; const f = ev.target.files[0]; if(!f) return;&#10;        const form = new FormData(); form.append('avatar', f); form.append('userId', state.user.userId);&#10;        const r = await fetch('/api/user/avatarUpload',{method:'POST',body:form}); const d = await r.json();&#10;        if(d.status===0){ profile.avatar=d.url; state.user.avatar=d.url; notify('头像上传成功'); await load(); } // 上传头像后刷新活动列表&#10;        else notify('头像上传失败','danger');&#10;      };&#10;      const changePwd = async ()=&gt;{&#10;        if(!state.user) return;&#10;        const p = new URLSearchParams({userId:state.user.userId,oldPwd:pwdForm.oldPwd,newPwd:pwdForm.newPwd});&#10;        const r = await fetch('/api/user/changePwd',{method:'POST',body:p}); const d = await r.json();&#10;        if(d.status===0){ notify('密码修改成功'); state.view='user'; pwdForm.oldPwd=''; pwdForm.newPwd=''; }&#10;        else notify('原密码错误','danger');&#10;      };&#10;      const apply = async (aid, maxNum, count)=&gt;{&#10;        if(!state.user){ notify('请先登录','warning'); state.view='login'; return; }&#10;        &#10;        // Check if activity is full&#10;        if (count &gt;= maxNum) {&#10;          notify('活动报名人数已满，无法报名','warning');&#10;          return;&#10;        }&#10;&#10;        // Check if user has already registered for this activity&#10;        await loadMyRegs();&#10;        const alreadyRegistered = myRegs.value.some(reg =&gt; reg.activityId === aid);&#10;        if (alreadyRegistered) {&#10;          notify('已报名','info');&#10;          return;&#10;        }&#10;        &#10;        // Load registrations for this activity to check if it's full&#10;        try {&#10;          const regRes = await fetch(`/api/registration/list?activityId=${aid}`);&#10;          const registrations = await regRes.json();&#10;          &#10;          // Check if activity is full based on submitted applications&#10;          if (registrations &amp;&amp; registrations.length &gt;= maxNum) {&#10;            notify('活动报名人数已满，无法报名','warning');&#10;            return;&#10;          }&#10;        } catch (e) {&#10;          // If we can't load registrations, fall back to the count parameter&#10;          if (count &gt;= maxNum) {&#10;            notify('活动报名人数已满，无法报名','warning');&#10;            return;&#10;          }&#10;        }&#10;        &#10;        const r = await fetch('/api/registration/apply',{method:'POST',body:new URLSearchParams({userId:state.user.userId,activityId:aid})});&#10;        const d = await r.json();&#10;        if(d.status===0){ notify('已成功提交申请','success'); await load(); await loadMyRegs(); } // 报名后刷新活动列表&#10;        else if(d.status===2){ &#10;          // Check approved registrations to determine if activity is truly full&#10;          try {&#10;            const regRes = await fetch(`/api/registration/list?activityId=${aid}`);&#10;            const registrations = await regRes.json();&#10;            &#10;            // Count approved registrations&#10;            const approvedCount = registrations.filter(reg =&gt; reg.status === '已通过').length;&#10;            &#10;            // If approved registrations &gt;= maxNum, then it's truly full&#10;            if (approvedCount &gt;= maxNum) {&#10;              notify('活动报名人数已满，无法报名','warning');&#10;              return;&#10;            } else {&#10;              // If not truly full, show the message from server&#10;              notify('报名失败','danger');&#10;              return;&#10;            }&#10;          } catch (e) {&#10;            // If we can't load registrations, show the message from server&#10;            notify('报名失败','danger');&#10;            return;&#10;          }&#10;        }&#10;        else notify('报名失败','danger');&#10;      };&#10;      const manage = (aid)=&gt;{ openManage(aid); };&#10;&#10;      // 活动详情功能&#10;      const showActivityDetail = (activity) =&gt; {&#10;        selectedActivity.value = activity;&#10;        previousView.value = state.view; // 保存当前视图&#10;        state.view = 'activityDetail';&#10;      };&#10;      &#10;      // 返回上一个视图&#10;      const backToPreviousView = () =&gt; {&#10;        state.view = previousView.value || 'activities';&#10;      };&#10;      &#10;      const viewActivityFromReg = (activityId) =&gt; {&#10;        // 根据活动ID找到活动详情并显示&#10;        const activity = activities.value.find(a =&gt; a.activityId === activityId) || &#10;                        myActs.value.find(a =&gt; a.activityId === activityId);&#10;        if (activity) {&#10;          showActivityDetail(activity);&#10;        } else {&#10;          notify('未找到活动详情', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 发布/编辑活动&#10;      const openPublish = ()=&gt;{ state.view='publish'; pubForm.activityId=''; pubForm.name=''; pubForm.desc=''; pubForm.location=''; pubForm.startTime=''; pubForm.endTime=''; pubForm.maxNum=0; pubFormMsg.value=''; };&#10;      const editAct = async (act)=&gt;{ &#10;        state.view='publish'; &#10;        pubForm.activityId=act.activityId; &#10;        pubForm.name=act.activityName; &#10;        pubForm.desc=act.description; &#10;        pubForm.location=act.location || '';&#10;        pubFormMsg.value=''; &#10;        pubForm.startTime=''; &#10;        pubForm.endTime=''; &#10;        // 修复时间格式处理的bug&#10;        if(act.startTime) {&#10;          // 确保正确处理时间格式，修复可能的时区问题&#10;          const startDate = new Date(act.startTime);&#10;          pubForm.startTime = startDate.toISOString().slice(0, 16);&#10;        }&#10;        if(act.endTime) {&#10;          // 确保正确处理时间格式，修复可能的时区问题&#10;          const endDate = new Date(act.endTime);&#10;          pubForm.endTime = endDate.toISOString().slice(0, 16);&#10;        }&#10;        pubForm.maxNum=act.maxNum||0;&#10;        &#10;        // 获取已通过审核的报名人数，以便在提交时进行验证&#10;        try {&#10;          const r = await fetch(`/api/registration/list?activityId=${act.activityId}`);&#10;          const regs = await r.json();&#10;          const approvedCount = regs.filter(reg =&gt; reg.status === '已通过').length;&#10;          // 将已通过审核的人数保存到表单中，用于提交时验证&#10;          pubForm.approvedCount = approvedCount;&#10;        } catch (e) {&#10;          console.error('获取报名信息失败', e);&#10;          pubForm.approvedCount = 0;&#10;        }&#10;      };&#10;      const submitPublish = async ()=&gt;{&#10;        pubFormMsg.value='';&#10;        if(!pubForm.name||!pubForm.desc||!pubForm.startTime||!pubForm.endTime||!pubForm.maxNum){ pubFormMsg.value='请填写完整'; return; }&#10;        &#10;        // 检查活动结束时间不得早于开始时间&#10;        const startTime = new Date(pubForm.startTime);&#10;        const endTime = new Date(pubForm.endTime);&#10;        if (endTime &lt;= startTime) {&#10;          pubFormMsg.value='活动结束时间必须晚于开始时间';&#10;          return;&#10;        }&#10;        &#10;        // 如果是编辑活动，检查最大人数不能少于已通过审核的人数&#10;        if (pubForm.activityId &amp;&amp; pubForm.approvedCount !== undefined &amp;&amp; pubForm.maxNum &lt; pubForm.approvedCount) {&#10;          pubFormMsg.value=`最大人数不能少于已通过审核的人数 (${pubForm.approvedCount})`;&#10;          return;&#10;        }&#10;        &#10;        const p=new URLSearchParams({name:pubForm.name,desc:pubForm.desc,location:pubForm.location,publisherId:state.user.userId,startTime:pubForm.startTime,endTime:pubForm.endTime,maxNum:pubForm.maxNum});&#10;        const url = pubForm.activityId?'/api/activity/update':'/api/activity/publish';&#10;        if(pubForm.activityId) p.append('activityId',pubForm.activityId);&#10;        const r = await fetch(url,{method:'POST',body:p}); const d=await r.json();&#10;        if(d.status===0){ notify(pubForm.activityId?'修改成功':'已提交申请'); state.view='myact'; await loadMyActs(); await load(); } // 发布/编辑后刷新活动列表&#10;        else pubFormMsg.value='操作失败';&#10;      };&#10;      const cancelPublish = ()=&gt;{ state.view='myact'; };&#10;      const loadMyActs = async ()=&gt;{&#10;        if(!state.user) return; const r=await fetch('/api/activity/my',{method:'POST',body:new URLSearchParams({publisherId:state.user.userId})}); myActs.value=await r.json();&#10;      };&#10;      const deleteAct = async (aid)=&gt;{ if(!confirm('确认删除？')) return; const r=await fetch('/api/activity/delete',{method:'POST',body:new URLSearchParams({activityId:aid,publisherId:state.user.userId})}); const d=await r.json(); if(d.status===0){ notify('已删除'); await loadMyActs(); await load(); } else notify('删除失败','danger'); }; // 删除后刷新活动列表&#10;      // 我的报名&#10;      const loadMyRegs = async ()=&gt;{ if(!state.user) return; const r=await fetch('/api/registration/my',{method:'POST',body:new URLSearchParams({userId:state.user.userId})}); myRegs.value=await r.json(); };&#10;      // 报名管理&#10;      const openManage = async (aid)=&gt;{ state.view='manage'; manageState.activityId=aid; await loadRegsVue(aid); };&#10;      const loadRegsVue = async (aid)=&gt;{ const r=await fetch(`/api/registration/list?activityId=${aid}`); manageState.regs=await r.json(); };&#10;      const reviewReg = async (rid, approve)=&gt;{ const r=await fetch('/api/registration/review',{method:'POST',body:new URLSearchParams({registrationId:rid,approve})}); const d=await r.json(); if(d.status===0){ notify('审核成功'); await loadRegsVue(manageState.activityId); await load(); await loadMyRegs(); } else notify('操作失败','danger'); }; // 审核后刷新活动列表&#10;      const delReg = async (rid)=&gt;{ const r=await fetch('/api/registration/delete',{method:'POST',body:new URLSearchParams({registrationId:rid})}); const d=await r.json(); if(d.status===0){ notify('已删除'); await loadRegsVue(manageState.activityId); await load(); await loadMyRegs(); } else notify('删除失败','danger'); }; // 删除后刷新活动列表&#10;      const addReg = async ()=&gt;{ const uid = manageState.addUserId.trim(); if(!uid){ notify('请输入用户ID','warning'); return; } const r=await fetch('/api/registration/add',{method:'POST',body:new URLSearchParams({userId:uid,activityId:manageState.activityId})}); const d=await r.json(); if(d.status===0){ notify('已添加'); manageState.addUserId=''; await loadRegsVue(manageState.activityId); await load(); await loadMyRegs(); } else notify('添加失败','danger'); }; // 添加后刷新活动列表&#10;      &#10;      // 活动审核功能&#10;      const reviewActivity = async (activityId, status) =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        const r = await fetch('/api/activity/review', {&#10;          method: 'POST',&#10;          body: new URLSearchParams({&#10;            activityId: activityId,&#10;            status: status,&#10;            reviewerId: state.user.userId&#10;          })&#10;        });&#10;        &#10;        const d = await r.json();&#10;        if (d.status === 0) {&#10;          notify(status === 'approved' ? '活动已通过' : '活动已拒绝', 'success');&#10;          // 重新加载活动列表&#10;          await load();&#10;          // 如果在活动管理页面，重新加载待审核活动&#10;          if (state.view === 'activityManagement') {&#10;            await loadPendingActivities();&#10;          }&#10;          // 如果在活动详情页面且查看的是被审核的活动，更新详情&#10;          if (selectedActivity.value &amp;&amp; selectedActivity.value.activityId === activityId) {&#10;            selectedActivity.value.status = status;&#10;          }&#10;          // 刷新我的活动列表&#10;          await loadMyActs();&#10;        } else {&#10;          notify(d.msg || '审核失败', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 活动删除功能（管理员）&#10;      const deleteActivity = async (activityId) =&gt; {&#10;        if (!state.user) {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!confirm('确认删除该活动？')) return;&#10;        &#10;        try {&#10;          const r = await fetch('/api/activity/delete', {&#10;            method: 'POST',&#10;            body: new URLSearchParams({&#10;              activityId: activityId,&#10;              publisherId: state.user.userId // 请求者ID&#10;            })&#10;          });&#10;          &#10;          const d = await r.json();&#10;          if (d.status === 0) {&#10;            notify('活动已删除', 'success');&#10;            // 重新加载活动列表&#10;            await load();&#10;            // 如果在活动管理页面，重新加载活动&#10;            if (state.view === 'activityManagement') {&#10;              await loadAllActivities();&#10;            }&#10;            // 刷新我的活动列表&#10;            await loadMyActs();&#10;          } else {&#10;            notify(d.msg || '删除失败', 'danger');&#10;          }&#10;        } catch (error) {&#10;          notify('删除失败', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 获取活动状态文本&#10;      const getActivityStatusText = (status) =&gt; {&#10;        switch (status) {&#10;          case 'pending': return '待审核';&#10;          case 'approved': return '已通过';&#10;          case 'rejected': return '已拒绝';&#10;          default: return '未知';&#10;        }&#10;      };&#10;      &#10;      // 获取活动状态样式类&#10;      const getActivityStatusClass = (status) =&gt; {&#10;        switch (status) {&#10;          case 'pending': return 'bg-warning text-dark status-pending';&#10;          case 'approved': return 'bg-success status-approved';&#10;          case 'rejected': return 'bg-danger status-rejected';&#10;          default: return 'bg-secondary';&#10;        }&#10;      };&#10;      &#10;      // 确认更新用户角色&#10;      const confirmUpdateRole = () =&gt; {&#10;        if (!selectedUser.value) {&#10;          notify('请先选择要修改的用户', 'warning');&#10;          return;&#10;        }&#10;        &#10;        // 检查是否尝试修改自己的角色&#10;        if (selectedUser.value.userId === state.user.userId) {&#10;          notify('不能修改自己的角色', 'warning');&#10;          return;&#10;        }&#10;        &#10;        // 检查角色是否发生变化&#10;        if (newRole.value === selectedUser.value.role) {&#10;          notify('用户角色未发生变化', 'warning');&#10;          return;&#10;        }&#10;        &#10;        // 获取角色显示名称&#10;        const currentRoleName = selectedUser.value.role === 'admin' ? '管理员' : '普通用户';&#10;        const newRoleName = newRole.value === 'admin' ? '管理员' : '普通用户';&#10;        &#10;        if (confirm(`确定要将用户 &quot;${selectedUser.value.username}&quot; 的角色从 &quot;${currentRoleName}&quot; 修改为 &quot;${newRoleName}&quot; 吗？`)) {&#10;          updateUserInfo();&#10;        }&#10;      };&#10;&#10;      // 更新用户信息（包括角色）&#10;      const updateUserInfo = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!selectedUser.value) {&#10;          notify('未选择用户', 'warning');&#10;          return;&#10;        }&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          userId: selectedUser.value.userId,&#10;          username: selectedUser.value.username,&#10;          email: selectedUser.value.email,&#10;          role: newRole.value&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/update', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户信息更新成功');&#10;          // 重新加载用户列表&#10;          await loadUserList(pagination.page, pagination.pageSize);&#10;          // 重置新角色为默认值&#10;          newRole.value = 'user';&#10;        } else {&#10;          notify(d.msg || '更新失败', 'danger');&#10;        }&#10;      };&#10;&#10;      // 确认删除用户&#10;      const confirmDeleteUser = () =&gt; {&#10;        if (!selectedUser.value) {&#10;          notify('请先选择要删除的用户', 'warning');&#10;          return;&#10;        }&#10;        &#10;        if (confirm(`确定要删除用户 &quot;${selectedUser.value.username}&quot; 吗？此操作不可恢复！`)) {&#10;          deleteUser(selectedUser.value.userId);&#10;        }&#10;      };&#10;&#10;      // 搜索用户&#10;      const searchUsers = async () =&gt; {&#10;        // 重置到第一页并执行搜索&#10;        await loadUserList(1, 10);&#10;      };&#10;&#10;      // 重置搜索&#10;      const resetSearch = async () =&gt; {&#10;        searchKeyword.value = '';&#10;        // 重置到第一页并重新加载所有用户&#10;        await loadUserList(1, 10);&#10;      };&#10;&#10;      // 选中用户&#10;      const selectUser = (user) =&gt; {&#10;        selectedUser.value = user;&#10;        // 同步新角色选择框的值&#10;        newRole.value = user.role;&#10;      };&#10;&#10;      // 在设置视图时加载相应数据&#10;      const setView = async (viewName) =&gt; {&#10;        state.view = viewName;&#10;        if (viewName === 'activityManagement') {&#10;          await loadAllActivities();&#10;        } else if (viewName === 'userManagement') {&#10;          // 加载第一页用户列表&#10;          await loadUserList(1, 10);&#10;          // 重置新角色为默认值&#10;          newRole.value = 'user';&#10;        }&#10;      };&#10;&#10;      // 管理员功能：创建用户&#10;      const createUser = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!newUser.username || !newUser.password || !newUser.email) {&#10;          newUser.errorMsg = '请填写完整信息';&#10;          return;&#10;        }&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          username: newUser.username,&#10;          password: newUser.password,&#10;          email: newUser.email,&#10;          role: newUser.role&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/create', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户创建成功');&#10;          newUser.username = '';&#10;          newUser.password = '';&#10;          newUser.email = '';&#10;          newUser.role = 'user';&#10;          newUser.errorMsg = '';&#10;          await loadUserList();&#10;        } else {&#10;          newUser.errorMsg = d.msg || '创建失败';&#10;        }&#10;      };&#10;      &#10;      // 管理员功能：删除用户&#10;      const deleteUser = async (userId) =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!confirm('确认删除该用户？')) return;&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          userId: userId&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/delete', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户删除成功');&#10;          await loadUserList();&#10;        } else {&#10;          notify(d.msg || '删除失败', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 管理员功能：编辑用户&#10;      const editUser = (user) =&gt; {&#10;        editingUser.userId = user.userId;&#10;        editingUser.username = user.username;&#10;        editingUser.email = user.email;&#10;        editingUser.role = user.role;&#10;        &#10;        // 显示模态框&#10;        const modal = new bootstrap.Modal(document.getElementById('editUserModal'));&#10;        modal.show();&#10;      };&#10;      &#10;      // 管理员功能：更新用户&#10;      const updateUser = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          userId: editingUser.userId,&#10;          username: editingUser.username,&#10;          email: editingUser.email,&#10;          role: editingUser.role&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/update', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户信息更新成功');&#10;          // 隐藏模态框&#10;          const modalEl = document.getElementById('editUserModal');&#10;          const modal = bootstrap.Modal.getInstance(modalEl);&#10;          modal.hide();&#10;          await loadUserList();&#10;        } else {&#10;          notify(d.msg || '更新失败', 'danger');&#10;        }&#10;      };&#10;&#10;      // 首次加载&#10;      load();&#10;      return { &#10;        activities, &#10;        pendingActivities,&#10;        state, &#10;        loginForm, &#10;        regForm, &#10;        profile, &#10;        pwdForm, &#10;        pubForm, &#10;        pubFormMsg, &#10;        myActs, &#10;        myRegs, &#10;        manageState, &#10;        selectedActivity,&#10;        previousView,&#10;        newUser, // 新增用户表单&#10;        userList, // 用户列表&#10;        editingUser, // 编辑中的用户&#10;        pagination, // 分页数据&#10;        activityPagination, // 活动列表分页数据&#10;        selectedUser, // 选中的用户&#10;        searchKeyword, // 搜索关键词&#10;        newRole, // 新角色&#10;        load, &#10;        apply, &#10;        manage, &#10;        showActivityDetail,&#10;        backToPreviousView,&#10;        viewActivityFromReg, &#10;        doLogin, &#10;        doRegister, &#10;        logout, &#10;        updateInfo, &#10;        uploadAvatar, &#10;        changePwd, &#10;        openPublish, &#10;        editAct, &#10;        submitPublish, &#10;        cancelPublish, &#10;        loadMyActs, &#10;        deleteAct, &#10;        loadMyRegs, &#10;        openManage, &#10;        reviewReg, &#10;        delReg, &#10;        addReg,&#10;        reviewActivity,&#10;        deleteActivity,&#10;        getActivityStatusText,&#10;        getActivityStatusClass,&#10;        loadPendingActivities,&#10;        setView,&#10;        loadUserList, // 加载用户列表&#10;        loadActivitiesWithPagination, // 加载分页活动列表&#10;        getPageNumbers, // 获取分页页码&#10;        selectUser, // 选中用户&#10;        searchUsers, // 搜索用户&#10;        resetSearch, // 重置搜索&#10;        confirmDeleteUser, // 确认删除用户&#10;        confirmUpdateRole, // 确认更新用户角色&#10;        updateUserInfo, // 更新用户信息&#10;        createUser, // 创建用户&#10;        deleteUser, // 删除用户&#10;        editUser, // 编辑用户&#10;        updateUser // 更新用户&#10;      };&#10;    }&#10;  });&#10;  window.vueApp = app.mount('#app');&#10;}" />
              <option name="updatedContent" value="// Modern notification system&#10;let notificationId = 0;&#10;&#10;function notify(msg, type='success') {&#10;  const container = document.getElementById('notificationContainer');&#10;  if (!container) {&#10;    // Fallback to old notification system&#10;    let n = document.getElementById('notifyBar');&#10;    n.innerText = msg;&#10;    n.className = 'alert alert-' + type;&#10;    n.style.display = 'block';&#10;    setTimeout(() =&gt; n.style.display = 'none', 2200);&#10;    return;&#10;  }&#10;&#10;  const id = `notification-${notificationId++}`;&#10;  const notification = document.createElement('div');&#10;  notification.className = `notification ${type}`;&#10;  notification.id = id;&#10;  &#10;  // Add icon based on type&#10;  let iconClass = '';&#10;  switch(type) {&#10;    case 'success':&#10;      iconClass = 'fas fa-check-circle';&#10;      break;&#10;    case 'warning':&#10;      iconClass = 'fas fa-exclamation-circle';&#10;      break;&#10;    case 'danger':&#10;      iconClass = 'fas fa-times-circle';&#10;      break;&#10;    case 'info':&#10;      iconClass = 'fas fa-info-circle';&#10;      break;&#10;    default:&#10;      iconClass = 'fas fa-bell';&#10;  }&#10;  &#10;  notification.innerHTML = `&#10;    &lt;div class=&quot;notification-icon&quot;&gt;&#10;      &lt;i class=&quot;${iconClass}&quot;&gt;&lt;/i&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;notification-content&quot;&gt;${msg}&lt;/div&gt;&#10;    &lt;div class=&quot;notification-close&quot; onclick=&quot;closeNotification('${id}')&quot;&gt;&#10;      &lt;i class=&quot;fas fa-times&quot;&gt;&lt;/i&gt;&#10;    &lt;/div&gt;&#10;  `;&#10;  &#10;  container.appendChild(notification);&#10;  &#10;  // Trigger show animation&#10;  setTimeout(() =&gt; {&#10;    notification.classList.add('show');&#10;  }, 10);&#10;  &#10;  // Auto close after 3 seconds&#10;  setTimeout(() =&gt; {&#10;    closeNotification(id);&#10;  }, 3000);&#10;}&#10;&#10;function closeNotification(id) {&#10;  const notification = document.getElementById(id);&#10;  if (notification) {&#10;    notification.classList.remove('show');&#10;    setTimeout(() =&gt; {&#10;      notification.remove();&#10;    }, 300);&#10;  }&#10;}&#10;&#10;// ---- Vue 3 应用（完整） ----&#10;if(window.Vue){&#10;  const { createApp, ref, reactive } = Vue;&#10;  const app = createApp({&#10;    setup(){&#10;      const activities = ref([]);&#10;      const pendingActivities = ref([]); // 待审核活动列表&#10;      const state = reactive({ user: null, view: 'login' });&#10;      const loginForm = reactive({ username: '', password: '' });&#10;      const regForm = reactive({ username: '', password: '', email: '' });&#10;      const profile = reactive({ username: '', email: '', avatar: '/resources/images/default-avatar.jpg' });&#10;      const pwdForm = reactive({ oldPwd: '', newPwd: '' });&#10;      const pubForm = reactive({ activityId: '', name: '', desc: '', location: '', startTime: '', endTime: '', maxNum: 0 });&#10;      const pubFormMsg = ref('');&#10;      const myActs = ref([]);&#10;      const myRegs = ref([]);&#10;      const manageState = reactive({ activityId: '', regs: [], addUserId: '' });&#10;      const selectedActivity = ref(null);&#10;      const previousView = ref('activities'); // 用于返回上一个视图&#10;      const newUser = reactive({ username: '', password: '', email: '', role: 'user', errorMsg: '' }); // 新增用户表单&#10;      const userList = ref([]); // 用户列表&#10;      const editingUser = reactive({ userId: '', username: '', email: '', role: 'user' }); // 编辑中的用户&#10;      const selectedUser = ref(null); // 选中的用户&#10;      const searchKeyword = ref(''); // 搜索关键词&#10;      const newRole = ref('user'); // 新角色&#10;&#10;      // 分页相关数据&#10;      const pagination = reactive({&#10;        page: 1,&#10;        pageSize: 10,&#10;        total: 0,&#10;        totalPages: 0&#10;      });&#10;&#10;      // 活动列表分页数据&#10;      const activityPagination = reactive({&#10;        page: 1,&#10;        pageSize: 10,&#10;        total: 0,&#10;        totalPages: 0&#10;      });&#10;&#10;      // 搜索/筛选状态&#10;      const filters = reactive({ startTime: '', endTime: '', location: '', publisher: '', hasAvailable: false });&#10;      const searching = ref(false);&#10;&#10;      const load = async ()=&gt;{&#10;        // 检查是否需要分页&#10;        if (state.view === 'activities') {&#10;          // 活动报名页面使用分页&#10;          await loadActivitiesWithPagination(1, 6);&#10;        } else {&#10;          // 其他情况加载所有活动&#10;          const res = await fetch('/api/activity/list');&#10;          activities.value = await res.json();&#10;        }&#10;      };&#10;&#10;      // 加载分页活动列表&#10;      const loadActivitiesWithPagination = async (page = 1, pageSize = 6) =&gt; {&#10;        try {&#10;          // 如果处于搜索状态，请求更大的 pageSize 以便客户端过滤&#10;          const reqPageSize = searching.value ? Math.max(pageSize, 100) : pageSize;&#10;          const res = await fetch(`/api/activity/list?page=${page}&amp;pageSize=${reqPageSize}`);&#10;          const data = await res.json();&#10;&#10;          let rawList = [];&#10;          if (data.activities) {&#10;            rawList = data.activities;&#10;            // 更新分页信息（仅在非搜索时使用后端分页信息）&#10;            if (!searching.value) {&#10;              activityPagination.page = data.page;&#10;              activityPagination.pageSize = data.pageSize;&#10;              activityPagination.total = data.total;&#10;              activityPagination.totalPages = data.totalPages;&#10;            } else {&#10;              // 搜索时，用后端返回的列表作为候选并重置分页显示&#10;              activityPagination.page = 1;&#10;              activityPagination.pageSize = reqPageSize;&#10;              activityPagination.total = rawList.length;&#10;              activityPagination.totalPages = 1;&#10;            }&#10;          } else {&#10;            rawList = data;&#10;            activityPagination.page = 1;&#10;            activityPagination.pageSize = rawList.length || reqPageSize;&#10;            activityPagination.total = rawList.length || 0;&#10;            activityPagination.totalPages = 1;&#10;          }&#10;&#10;          // 如果在搜索状态，进行客户端过滤&#10;          if (searching.value) {&#10;            activities.value = applyClientFilters(rawList);&#10;          } else {&#10;            activities.value = rawList;&#10;          }&#10;        } catch (error) {&#10;          console.error('加载活动列表失败:', error);&#10;          activities.value = [];&#10;        }&#10;      };&#10;&#10;      // 计算分页页码数组&#10;      const getPageNumbers = () =&gt; {&#10;        const pageNumbers = [];&#10;        // 根据当前视图选择使用哪个分页数据&#10;        let page, totalPages;&#10;        if (state.view === 'activities') {&#10;          // 活动列表使用活动分页数据&#10;          page = activityPagination.page;&#10;          totalPages = activityPagination.totalPages;&#10;        } else if (state.view === 'userManagement') {&#10;          // 用户列表使用用户分页数据&#10;          page = pagination.page;&#10;          totalPages = pagination.totalPages;&#10;        } else {&#10;          return [];&#10;        }&#10;&#10;        let start = Math.max(1, page - 2);&#10;        let end = Math.min(totalPages, page + 2);&#10;&#10;        // 确保显示5个页码（如果可能）&#10;        if (end - start &lt; 4) {&#10;          if (start === 1) {&#10;            end = Math.min(totalPages, start + 4);&#10;          } else {&#10;            start = Math.max(1, end - 4);&#10;          }&#10;        }&#10;&#10;        for (let i = start; i &lt;= end; i++) {&#10;          pageNumbers.push(i);&#10;        }&#10;&#10;        return pageNumbers;&#10;      };&#10;      &#10;      // 加载待审核活动&#10;      const loadPendingActivities = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') return;&#10;        const res = await fetch(`/api/activity/pending?reviewerId=${state.user.userId}`);&#10;        const result = await res.json();&#10;        if (Array.isArray(result)) {&#10;          pendingActivities.value = result;&#10;        } else {&#10;          pendingActivities.value = [];&#10;        }&#10;      };&#10;      &#10;      // 加载所有活动（供管理员在活动管理页面使用）&#10;      const loadAllActivities = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') return;&#10;        const res = await fetch(`/api/activity/all?reviewerId=${state.user.userId}`);&#10;        const result = await res.json();&#10;        if (Array.isArray(result)) {&#10;          pendingActivities.value = result;&#10;        } else {&#10;          pendingActivities.value = [];&#10;        }&#10;      };&#10;      &#10;      // 加载用户列表（支持分页和搜索）&#10;      const loadUserList = async (page = 1, pageSize = 10) =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') return;&#10;        try {&#10;          console.log('正在加载用户列表，页码:', page, '每页数量:', pageSize, '搜索关键词:', searchKeyword.value);&#10;          &#10;          // 构建查询参数&#10;          let queryParams = `adminId=${state.user.userId}&amp;page=${page}&amp;pageSize=${pageSize}`;&#10;          if (searchKeyword.value) {&#10;            queryParams += `&amp;search=${encodeURIComponent(searchKeyword.value)}`;&#10;          }&#10;          &#10;          const res = await fetch(`/api/admin/user/list?${queryParams}`);&#10;          console.log('用户列表响应状态:', res.status);&#10;          if (res.ok) {&#10;            const result = await res.json();&#10;            console.log('用户列表数据:', result);&#10;            if (result.status === 0) {&#10;              // 解析返回的数据&#10;              const userData = JSON.parse(result.data.replace(/\\\\/g, '\\').replace(/\\&quot;/g, '&quot;'));&#10;              if (Array.isArray(userData)) {&#10;                userList.value = userData;&#10;              } else {&#10;                userList.value = [];&#10;              }&#10;              // 更新分页信息&#10;              pagination.total = result.total;&#10;              pagination.page = result.page;&#10;              pagination.pageSize = result.pageSize;&#10;              pagination.totalPages = result.totalPages;&#10;              &#10;              // 清除选中用户&#10;              selectedUser.value = null;&#10;            } else {&#10;              userList.value = [];&#10;            }&#10;          } else {&#10;            console.error('加载用户列表失败，状态码:', res.status);&#10;            userList.value = [];&#10;          }&#10;        } catch (error) {&#10;          console.error('加载用户列表失败:', error);&#10;          userList.value = [];&#10;        }&#10;      };&#10;      &#10;      const refreshUserInfo = async ()=&gt;{&#10;        if(!state.user) return;&#10;        const res = await fetch('/api/user/info',{method:'POST',body:new URLSearchParams({userId:state.user.userId})});&#10;        const d = await res.json();&#10;        profile.username = d.username||'';&#10;        profile.email = d.email||'';&#10;        // 使用 resources 下的默认头像作为兜底（与后端默认路径一致）&#10;        profile.avatar = (d.avatar || '/resources/images/default-avatar.jpg');&#10;      };&#10;      const doLogin = async ()=&gt;{&#10;        const p = new URLSearchParams({username:loginForm.username,password:loginForm.password});&#10;        const r = await fetch('/api/login',{method:'POST',body:p});&#10;        const d = await r.json();&#10;        if(d.status===0){&#10;          state.user=d; window.user=d; state.view='activities';&#10;          await load(); await refreshUserInfo();&#10;          await loadMyActs(); await loadMyRegs();&#10;          notify('登录成功');&#10;        } else notify(d.msg||'登录失败','danger');&#10;      };&#10;      const doRegister = async ()=&gt;{&#10;        const p = new URLSearchParams({username:regForm.username,password:regForm.password,email:regForm.email});&#10;        const r = await fetch('/api/register',{method:'POST',body:p});&#10;        const d = await r.json();&#10;        if(d.status===0){ notify('注册成功，请登录'); state.view='login'; }&#10;        else notify(d.msg||'注册失败','danger');&#10;      };&#10;      const logout = ()=&gt;{ state.user=null; window.user=null; state.view='welcome'; myActs.value = []; myRegs.value = []; pendingActivities.value = []; notify('已退出'); };&#10;      const updateInfo = async ()=&gt;{&#10;        if(!state.user) return;&#10;        const p = new URLSearchParams({userId:state.user.userId,username:profile.username,email:profile.email,avatar:profile.avatar});&#10;        const r = await fetch('/api/user/update',{method:'POST',body:p});&#10;        const d = await r.json();&#10;        if(d.status===0){ state.user.username=profile.username; notify('资料已保存','success'); await load(); } // 更新资料后刷新活动列表&#10;        else notify('修改失败，用户名可能已存在','danger');&#10;      };&#10;      const uploadAvatar = async (ev)=&gt;{&#10;        if(!state.user) return; const f = ev.target.files[0]; if(!f) return;&#10;        const form = new FormData(); form.append('avatar', f); form.append('userId', state.user.userId);&#10;        const r = await fetch('/api/user/avatarUpload',{method:'POST',body:form}); const d = await r.json();&#10;        if(d.status===0){ profile.avatar=d.url; state.user.avatar=d.url; notify('头像上传成功'); await load(); } // 上传头像后刷新活动列表&#10;        else notify('头像上传失败','danger');&#10;      };&#10;      const changePwd = async ()=&gt;{&#10;        if(!state.user) return;&#10;        const p = new URLSearchParams({userId:state.user.userId,oldPwd:pwdForm.oldPwd,newPwd:pwdForm.newPwd});&#10;        const r = await fetch('/api/user/changePwd',{method:'POST',body:p}); const d = await r.json();&#10;        if(d.status===0){ notify('密码修改成功'); state.view='user'; pwdForm.oldPwd=''; pwdForm.newPwd=''; }&#10;        else notify('原密码错误','danger');&#10;      };&#10;      const apply = async (aid, maxNum, count)=&gt;{&#10;        if(!state.user){ notify('请先登录','warning'); state.view='login'; return; }&#10;        &#10;        // Check if activity is full&#10;        if (count &gt;= maxNum) {&#10;          notify('活动报名人数已满，无法报名','warning');&#10;          return;&#10;        }&#10;&#10;        // Check if user has already registered for this activity&#10;        await loadMyRegs();&#10;        const alreadyRegistered = myRegs.value.some(reg =&gt; reg.activityId === aid);&#10;        if (alreadyRegistered) {&#10;          notify('已报名','info');&#10;          return;&#10;        }&#10;        &#10;        // Load registrations for this activity to check if it's full&#10;        try {&#10;          const regRes = await fetch(`/api/registration/list?activityId=${aid}`);&#10;          const registrations = await regRes.json();&#10;          &#10;          // Check if activity is full based on submitted applications&#10;          if (registrations &amp;&amp; registrations.length &gt;= maxNum) {&#10;            notify('活动报名人数已满，无法报名','warning');&#10;            return;&#10;          }&#10;        } catch (e) {&#10;          // If we can't load registrations, fall back to the count parameter&#10;          if (count &gt;= maxNum) {&#10;            notify('活动报名人数已满，无法报名','warning');&#10;            return;&#10;          }&#10;        }&#10;        &#10;        const r = await fetch('/api/registration/apply',{method:'POST',body:new URLSearchParams({userId:state.user.userId,activityId:aid})});&#10;        const d = await r.json();&#10;        if(d.status===0){ notify('已成功提交申请','success'); await load(); await loadMyRegs(); } // 报名后刷新活动列表&#10;        else if(d.status===2){ &#10;          // Check approved registrations to determine if activity is truly full&#10;          try {&#10;            const regRes = await fetch(`/api/registration/list?activityId=${aid}`);&#10;            const registrations = await regRes.json();&#10;            &#10;            // Count approved registrations&#10;            const approvedCount = registrations.filter(reg =&gt; reg.status === '已通过').length;&#10;            &#10;            // If approved registrations &gt;= maxNum, then it's truly full&#10;            if (approvedCount &gt;= maxNum) {&#10;              notify('活动报名人数已满，无法报名','warning');&#10;              return;&#10;            } else {&#10;              // If not truly full, show the message from server&#10;              notify('报名失败','danger');&#10;              return;&#10;            }&#10;          } catch (e) {&#10;            // If we can't load registrations, show the message from server&#10;            notify('报名失败','danger');&#10;            return;&#10;          }&#10;        }&#10;        else notify('报名失败','danger');&#10;      };&#10;      const manage = (aid)=&gt;{ openManage(aid); };&#10;&#10;      // 活动详情功能&#10;      const showActivityDetail = (activity) =&gt; {&#10;        selectedActivity.value = activity;&#10;        previousView.value = state.view; // 保存当前视图&#10;        state.view = 'activityDetail';&#10;      };&#10;      &#10;      // 返回上一个视图&#10;      const backToPreviousView = () =&gt; {&#10;        state.view = previousView.value || 'activities';&#10;      };&#10;      &#10;      const viewActivityFromReg = (activityId) =&gt; {&#10;        // 根据活动ID找到活动详情并显示&#10;        const activity = activities.value.find(a =&gt; a.activityId === activityId) || &#10;                        myActs.value.find(a =&gt; a.activityId === activityId);&#10;        if (activity) {&#10;          showActivityDetail(activity);&#10;        } else {&#10;          notify('未找到活动详情', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 发布/编辑活动&#10;      const openPublish = ()=&gt;{ state.view='publish'; pubForm.activityId=''; pubForm.name=''; pubForm.desc=''; pubForm.location=''; pubForm.startTime=''; pubForm.endTime=''; pubForm.maxNum=0; pubFormMsg.value=''; };&#10;      const editAct = async (act)=&gt;{ &#10;        state.view='publish'; &#10;        pubForm.activityId=act.activityId; &#10;        pubForm.name=act.activityName; &#10;        pubForm.desc=act.description; &#10;        pubForm.location=act.location || '';&#10;        pubFormMsg.value=''; &#10;        pubForm.startTime=''; &#10;        pubForm.endTime=''; &#10;        // 修复时间格式处理的bug&#10;        if(act.startTime) {&#10;          // 确保正确处理时间格式，修复可能的时区问题&#10;          const startDate = new Date(act.startTime);&#10;          pubForm.startTime = startDate.toISOString().slice(0, 16);&#10;        }&#10;        if(act.endTime) {&#10;          // 确保正确处理时间格式，修复可能的时区问题&#10;          const endDate = new Date(act.endTime);&#10;          pubForm.endTime = endDate.toISOString().slice(0, 16);&#10;        }&#10;        pubForm.maxNum=act.maxNum||0;&#10;        &#10;        // 获取已通过审核的报名人数，以便在提交时进行验证&#10;        try {&#10;          const r = await fetch(`/api/registration/list?activityId=${act.activityId}`);&#10;          const regs = await r.json();&#10;          const approvedCount = regs.filter(reg =&gt; reg.status === '已通过').length;&#10;          // 将已通过审核的人数保存到表单中，用于提交时验证&#10;          pubForm.approvedCount = approvedCount;&#10;        } catch (e) {&#10;          console.error('获取报名信息失败', e);&#10;          pubForm.approvedCount = 0;&#10;        }&#10;      };&#10;      const submitPublish = async ()=&gt;{&#10;        pubFormMsg.value='';&#10;        if(!pubForm.name||!pubForm.desc||!pubForm.startTime||!pubForm.endTime||!pubForm.maxNum){ pubFormMsg.value='请填写完整'; return; }&#10;        &#10;        // 检查活动结束时间不得早于开始时间&#10;        const startTime = new Date(pubForm.startTime);&#10;        const endTime = new Date(pubForm.endTime);&#10;        if (endTime &lt;= startTime) {&#10;          pubFormMsg.value='活动结束时间必须晚于开始时间';&#10;          return;&#10;        }&#10;        &#10;        // 如果是编辑活动，检查最大人数不能少于已通过审核的人数&#10;        if (pubForm.activityId &amp;&amp; pubForm.approvedCount !== undefined &amp;&amp; pubForm.maxNum &lt; pubForm.approvedCount) {&#10;          pubFormMsg.value=`最大人数不能少于已通过审核的人数 (${pubForm.approvedCount})`;&#10;          return;&#10;        }&#10;        &#10;        const p=new URLSearchParams({name:pubForm.name,desc:pubForm.desc,location:pubForm.location,publisherId:state.user.userId,startTime:pubForm.startTime,endTime:pubForm.endTime,maxNum:pubForm.maxNum});&#10;        const url = pubForm.activityId?'/api/activity/update':'/api/activity/publish';&#10;        if(pubForm.activityId) p.append('activityId',pubForm.activityId);&#10;        const r = await fetch(url,{method:'POST',body:p}); const d=await r.json();&#10;        if(d.status===0){ notify(pubForm.activityId?'修改成功':'已提交申请'); state.view='myact'; await loadMyActs(); await load(); } // 发布/编辑后刷新活动列表&#10;        else pubFormMsg.value='操作失败';&#10;      };&#10;      const cancelPublish = ()=&gt;{ state.view='myact'; };&#10;      const loadMyActs = async ()=&gt;{&#10;        if(!state.user) return; const r=await fetch('/api/activity/my',{method:'POST',body:new URLSearchParams({publisherId:state.user.userId})}); myActs.value=await r.json();&#10;      };&#10;      const deleteAct = async (aid)=&gt;{ if(!confirm('确认删除？')) return; const r=await fetch('/api/activity/delete',{method:'POST',body:new URLSearchParams({activityId:aid,publisherId:state.user.userId})}); const d=await r.json(); if(d.status===0){ notify('已删除'); await loadMyActs(); await load(); } else notify('删除失败','danger'); }; // 删除后刷新活动列表&#10;      // 我的报名&#10;      const loadMyRegs = async ()=&gt;{ if(!state.user) return; const r=await fetch('/api/registration/my',{method:'POST',body:new URLSearchParams({userId:state.user.userId})}); myRegs.value=await r.json(); };&#10;      // 报名管理&#10;      const openManage = async (aid)=&gt;{ state.view='manage'; manageState.activityId=aid; await loadRegsVue(aid); };&#10;      const loadRegsVue = async (aid)=&gt;{ const r=await fetch(`/api/registration/list?activityId=${aid}`); manageState.regs=await r.json(); };&#10;      const reviewReg = async (rid, approve)=&gt;{ const r=await fetch('/api/registration/review',{method:'POST',body:new URLSearchParams({registrationId:rid,approve})}); const d=await r.json(); if(d.status===0){ notify('审核成功'); await loadRegsVue(manageState.activityId); await load(); await loadMyRegs(); } else notify('操作失败','danger'); }; // 审核后刷新活动列表&#10;      const delReg = async (rid)=&gt;{ const r=await fetch('/api/registration/delete',{method:'POST',body:new URLSearchParams({registrationId:rid})}); const d=await r.json(); if(d.status===0){ notify('已删除'); await loadRegsVue(manageState.activityId); await load(); await loadMyRegs(); } else notify('删除失败','danger'); }; // 删除后刷新活动列表&#10;      const addReg = async ()=&gt;{ const uid = manageState.addUserId.trim(); if(!uid){ notify('请输入用户ID','warning'); return; } const r=await fetch('/api/registration/add',{method:'POST',body:new URLSearchParams({userId:uid,activityId:manageState.activityId})}); const d=await r.json(); if(d.status===0){ notify('已添加'); manageState.addUserId=''; await loadRegsVue(manageState.activityId); await load(); await loadMyRegs(); } else notify('添加失败','danger'); }; // 添加后刷新活动列表&#10;      &#10;      // 活动审核功能&#10;      const reviewActivity = async (activityId, status) =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        const r = await fetch('/api/activity/review', {&#10;          method: 'POST',&#10;          body: new URLSearchParams({&#10;            activityId: activityId,&#10;            status: status,&#10;            reviewerId: state.user.userId&#10;          })&#10;        });&#10;        &#10;        const d = await r.json();&#10;        if (d.status === 0) {&#10;          notify(status === 'approved' ? '活动已通过' : '活动已拒绝', 'success');&#10;          // 重新加载活动列表&#10;          await load();&#10;          // 如果在活动管理页面，重新加载待审核活动&#10;          if (state.view === 'activityManagement') {&#10;            await loadPendingActivities();&#10;          }&#10;          // 如果在活动详情页面且查看的是被审核的活动，更新详情&#10;          if (selectedActivity.value &amp;&amp; selectedActivity.value.activityId === activityId) {&#10;            selectedActivity.value.status = status;&#10;          }&#10;          // 刷新我的活动列表&#10;          await loadMyActs();&#10;        } else {&#10;          notify(d.msg || '审核失败', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 活动删除功能（管理员）&#10;      const deleteActivity = async (activityId) =&gt; {&#10;        if (!state.user) {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!confirm('确认删除该活动？')) return;&#10;        &#10;        try {&#10;          const r = await fetch('/api/activity/delete', {&#10;            method: 'POST',&#10;            body: new URLSearchParams({&#10;              activityId: activityId,&#10;              publisherId: state.user.userId // 请求者ID&#10;            })&#10;          });&#10;          &#10;          const d = await r.json();&#10;          if (d.status === 0) {&#10;            notify('活动已删除', 'success');&#10;            // 重新加载活动列表&#10;            await load();&#10;            // 如果在活动管理页面，重新加载活动&#10;            if (state.view === 'activityManagement') {&#10;              await loadAllActivities();&#10;            }&#10;            // 刷新我的活动列表&#10;            await loadMyActs();&#10;          } else {&#10;            notify(d.msg || '删除失败', 'danger');&#10;          }&#10;        } catch (error) {&#10;          notify('删除失败', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 获取活动状态文本&#10;      const getActivityStatusText = (status) =&gt; {&#10;        switch (status) {&#10;          case 'pending': return '待审核';&#10;          case 'approved': return '已通过';&#10;          case 'rejected': return '已拒绝';&#10;          default: return '未知';&#10;        }&#10;      };&#10;      &#10;      // 获取活动状态样式类&#10;      const getActivityStatusClass = (status) =&gt; {&#10;        switch (status) {&#10;          case 'pending': return 'bg-warning text-dark status-pending';&#10;          case 'approved': return 'bg-success status-approved';&#10;          case 'rejected': return 'bg-danger status-rejected';&#10;          default: return 'bg-secondary';&#10;        }&#10;      };&#10;      &#10;      // 确认更新用户角色&#10;      const confirmUpdateRole = () =&gt; {&#10;        if (!selectedUser.value) {&#10;          notify('请先选择要修改的用户', 'warning');&#10;          return;&#10;        }&#10;        &#10;        // 检查是否尝试修改自己的角色&#10;        if (selectedUser.value.userId === state.user.userId) {&#10;          notify('不能修改自己的角色', 'warning');&#10;          return;&#10;        }&#10;        &#10;        // 检查角色是否发生变化&#10;        if (newRole.value === selectedUser.value.role) {&#10;          notify('用户角色未发生变化', 'warning');&#10;          return;&#10;        }&#10;        &#10;        // 获取角色显示名称&#10;        const currentRoleName = selectedUser.value.role === 'admin' ? '管理员' : '普通用户';&#10;        const newRoleName = newRole.value === 'admin' ? '管理员' : '普通用户';&#10;        &#10;        if (confirm(`确定要将用户 &quot;${selectedUser.value.username}&quot; 的角色从 &quot;${currentRoleName}&quot; 修改为 &quot;${newRoleName}&quot; 吗？`)) {&#10;          updateUserInfo();&#10;        }&#10;      };&#10;&#10;      // 更新用户信息（包括角色）&#10;      const updateUserInfo = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!selectedUser.value) {&#10;          notify('未选择用户', 'warning');&#10;          return;&#10;        }&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          userId: selectedUser.value.userId,&#10;          username: selectedUser.value.username,&#10;          email: selectedUser.value.email,&#10;          role: newRole.value&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/update', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户信息更新成功');&#10;          // 重新加载用户列表&#10;          await loadUserList(pagination.page, pagination.pageSize);&#10;          // 重置新角色为默认值&#10;          newRole.value = 'user';&#10;        } else {&#10;          notify(d.msg || '更新失败', 'danger');&#10;        }&#10;      };&#10;&#10;      // 确认删除用户&#10;      const confirmDeleteUser = () =&gt; {&#10;        if (!selectedUser.value) {&#10;          notify('请先选择要删除的用户', 'warning');&#10;          return;&#10;        }&#10;        &#10;        if (confirm(`确定要删除用户 &quot;${selectedUser.value.username}&quot; 吗？此操作不可恢复！`)) {&#10;          deleteUser(selectedUser.value.userId);&#10;        }&#10;      };&#10;&#10;      // 搜索用户&#10;      const searchUsers = async () =&gt; {&#10;        // 重置到第一页并执行搜索&#10;        await loadUserList(1, 10);&#10;      };&#10;&#10;      // 重置搜索&#10;      const resetSearch = async () =&gt; {&#10;        searchKeyword.value = '';&#10;        // 重置到第一页并重新加载所有用户&#10;        await loadUserList(1, 10);&#10;      };&#10;&#10;      // 选中用户&#10;      const selectUser = (user) =&gt; {&#10;        selectedUser.value = user;&#10;        // 同步新角色选择框的值&#10;        newRole.value = user.role;&#10;      };&#10;&#10;      // 在设置视图时加载相应数据&#10;      const setView = async (viewName) =&gt; {&#10;        state.view = viewName;&#10;        if (viewName === 'activityManagement') {&#10;          await loadAllActivities();&#10;        } else if (viewName === 'userManagement') {&#10;          // 加载第一页用户列表&#10;          await loadUserList(1, 10);&#10;          // 重置新角色为默认值&#10;          newRole.value = 'user';&#10;        }&#10;      };&#10;&#10;      // 管理员功能：创建用户&#10;      const createUser = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!newUser.username || !newUser.password || !newUser.email) {&#10;          newUser.errorMsg = '请填写完整信息';&#10;          return;&#10;        }&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          username: newUser.username,&#10;          password: newUser.password,&#10;          email: newUser.email,&#10;          role: newUser.role&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/create', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户创建成功');&#10;          newUser.username = '';&#10;          newUser.password = '';&#10;          newUser.email = '';&#10;          newUser.role = 'user';&#10;          newUser.errorMsg = '';&#10;          await loadUserList();&#10;        } else {&#10;          newUser.errorMsg = d.msg || '创建失败';&#10;        }&#10;      };&#10;      &#10;      // 管理员功能：删除用户&#10;      const deleteUser = async (userId) =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        if (!confirm('确认删除该用户？')) return;&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          userId: userId&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/delete', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户删除成功');&#10;          await loadUserList();&#10;        } else {&#10;          notify(d.msg || '删除失败', 'danger');&#10;        }&#10;      };&#10;      &#10;      // 管理员功能：编辑用户&#10;      const editUser = (user) =&gt; {&#10;        editingUser.userId = user.userId;&#10;        editingUser.username = user.username;&#10;        editingUser.email = user.email;&#10;        editingUser.role = user.role;&#10;        &#10;        // 显示模态框&#10;        const modal = new bootstrap.Modal(document.getElementById('editUserModal'));&#10;        modal.show();&#10;      };&#10;      &#10;      // 管理员功能：更新用户&#10;      const updateUser = async () =&gt; {&#10;        if (!state.user || state.user.role !== 'admin') {&#10;          notify('权限不足', 'danger');&#10;          return;&#10;        }&#10;        &#10;        const p = new URLSearchParams({&#10;          adminId: state.user.userId,&#10;          userId: editingUser.userId,&#10;          username: editingUser.username,&#10;          email: editingUser.email,&#10;          role: editingUser.role&#10;        });&#10;        &#10;        const r = await fetch('/api/admin/user/update', {method: 'POST', body: p});&#10;        const d = await r.json();&#10;        &#10;        if (d.status === 0) {&#10;          notify('用户信息更新成功');&#10;          // 隐藏模态框&#10;          const modalEl = document.getElementById('editUserModal');&#10;          const modal = bootstrap.Modal.getInstance(modalEl);&#10;          modal.hide();&#10;          await loadUserList();&#10;        } else {&#10;          notify(d.msg || '更新失败', 'danger');&#10;        }&#10;      };&#10;&#10;      // 客户端应用筛选（在获取到原始数据后应用）&#10;      const applyClientFilters = (list) =&gt; {&#10;        return list.filter(a =&gt; {&#10;          // 时间过滤&#10;          if (filters.startTime) {&#10;            if (!a.startTime || new Date(a.startTime) &lt; new Date(filters.startTime)) return false;&#10;          }&#10;          if (filters.endTime) {&#10;            if (!a.endTime || new Date(a.endTime) &gt; new Date(filters.endTime)) return false;&#10;          }&#10;          // 地点过滤（包含匹配）&#10;          if (filters.location) {&#10;            if (!a.location || a.location.toLowerCase().indexOf(filters.location.toLowerCase()) === -1) return false;&#10;          }&#10;          // 发布者过滤（匹配用户名或ID）&#10;          if (filters.publisher) {&#10;            const pub = (a.publisherName || a.publisherId || '').toString().toLowerCase();&#10;            if (pub.indexOf(filters.publisher.toLowerCase()) === -1) return false;&#10;          }&#10;          // 空余名额过滤&#10;          if (filters.hasAvailable) {&#10;            const count = parseInt(a.count || 0, 10);&#10;            const maxNum = parseInt(a.maxNum || 0, 10);&#10;            if (isNaN(count) || isNaN(maxNum) || count &gt;= maxNum) return false;&#10;          }&#10;          return true;&#10;        });&#10;      };&#10;&#10;      const applyFilters = async () =&gt; {&#10;        searching.value = true;&#10;        // 当搜索时，增加请求的 pageSize 以覆盖更多候选项（简单策略）&#10;        await loadActivitiesWithPagination(1, 100);&#10;      };&#10;&#10;      const resetFilters = () =&gt; {&#10;        filters.startTime = '';&#10;        filters.endTime = '';&#10;        filters.location = '';&#10;        filters.publisher = '';&#10;        filters.hasAvailable = false;&#10;        searching.value = false;&#10;        // 重新加载第一页&#10;        loadActivitiesWithPagination(1, activityPagination.pageSize);&#10;      };&#10;&#10;      // 首次加载&#10;      load();&#10;      return { &#10;        activities, &#10;        pendingActivities,&#10;        state, &#10;        loginForm, &#10;        regForm, &#10;        profile, &#10;        pwdForm, &#10;        pubForm, &#10;        pubFormMsg, &#10;        myActs, &#10;        myRegs, &#10;        manageState, &#10;        selectedActivity,&#10;        previousView,&#10;        newUser, // 新增用户表单&#10;        userList, // 用户列表&#10;        editingUser, // 编辑中的用户&#10;        pagination, // 分页数据&#10;        activityPagination, // 活动列表分页数据&#10;        selectedUser, // 选中的用户&#10;        searchKeyword, // 搜索关键词&#10;        newRole, // 新角色&#10;        load, &#10;        apply, &#10;        manage, &#10;        showActivityDetail,&#10;        backToPreviousView,&#10;        viewActivityFromReg, &#10;        doLogin, &#10;        doRegister, &#10;        logout, &#10;        updateInfo, &#10;        uploadAvatar, &#10;        changePwd, &#10;        openPublish, &#10;        editAct, &#10;        submitPublish, &#10;        cancelPublish, &#10;        loadMyActs, &#10;        deleteAct, &#10;        loadMyRegs, &#10;        openManage, &#10;        reviewReg, &#10;        delReg, &#10;        addReg,&#10;        reviewActivity,&#10;        deleteActivity,&#10;        getActivityStatusText,&#10;        getActivityStatusClass,&#10;        loadPendingActivities,&#10;        setView,&#10;        loadUserList, // 加载用户列表&#10;        loadActivitiesWithPagination, // 加载分页活动列表&#10;        getPageNumbers, // 获取分页页码&#10;        selectUser, // 选中用户&#10;        searchUsers, // 搜索用户&#10;        resetSearch, // 重置搜索&#10;        confirmDeleteUser, // 确认删除用户&#10;        confirmUpdateRole, // 确认更新用户角色&#10;        updateUserInfo, // 更新用户信息&#10;        createUser, // 创建用户&#10;        deleteUser, // 删除用户&#10;        editUser, // 编辑用户&#10;        updateUser // 更新用户&#10;      };&#10;    }&#10;  });&#10;  window.vueApp = app.mount('#app');&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/frontend/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/frontend/index.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh-CN&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;title&gt;校园活动报名系统&lt;/title&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot;&gt;&#10;    &lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;&#10;    &lt;style&gt;&#10;        body{background:#f4f8fa;}&#10;        .centered{max-width:1100px;margin:2.5rem auto;}&#10;        .shadow{box-shadow:0 2px 12px rgba(34,34,34,.08)!important;}&#10;&#10;        &lt;img :src=&quot;state.user.avatar||'/resources/images/default-avatar.jpg'&quot; class=&quot;avatar me-2&quot; alt=&quot;头像&quot;/&gt;&#10;&#10;        &lt;!-- 修改后 --&gt;&#10;         &lt;img :src=&quot;profile.avatar || '/resources/images/default-avatar.jpg'&quot; class=&quot;avatar&quot; alt=&quot;头像&quot;&gt;&#10;&#10;        .hero-banner{background:linear-gradient(120deg,#2A5298,#1e3c72);color:white;padding:2.2rem;border-radius:12px;margin-bottom:1.5rem;box-shadow:0 8px 30px rgba(33,47,61,.08)}&#10;        .hero-title{font-size:2.5rem;font-weight:800;letter-spacing:0.2px;margin-bottom:.5rem}&#10;        .hero-sub{opacity:.9;margin-bottom:1rem;font-size:1.2rem}&#10;        .hero-ctas .btn{min-width:160px}&#10;        @media (max-width:768px){ .hero-title{font-size:1.8rem} .centered{padding:0 1rem} .hero-sub{font-size:1rem} }&#10;        /* 登录返回按钮位置调整（仅作用于 auth-minimal 登录卡） */&#10;        .auth-card.auth-minimal{position:relative;padding-top:72px}&#10;        /* 左移 40px（从 -20 -&gt; -60），上移 40px（从 6 -&gt; -34） */&#10;        .auth-card.auth-minimal .back-button{position:absolute;left:-320px;top:-60px;z-index:5}&#10;        @media (max-width:576px){ .auth-card.auth-minimal .back-button{left:8px;top:6px} }&#10;        #notifyBar{position:fixed;top:10px;left:0;right:0;z-index:999;text-align:center;display:none;}&#10;        /* Modern notification styles */&#10;        .notification-container {&#10;          position: fixed;&#10;          top: 20px;&#10;          right: 20px;&#10;          z-index: 9999;&#10;        }&#10;        &#10;        .notification {&#10;          min-width: 300px;&#10;          max-width: 400px;&#10;          margin-bottom: 10px;&#10;          border-radius: 8px;&#10;          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);&#10;          transform: translateX(100%);&#10;          opacity: 0;&#10;          transition: all 0.3s ease-in-out;&#10;          display: flex;&#10;          align-items: center;&#10;          padding: 16px;&#10;        }&#10;        &#10;        .notification.show {&#10;          transform: translateX(0);&#10;          opacity: 1;&#10;        }&#10;        &#10;        .notification-icon {&#10;          margin-right: 12px;&#10;          font-size: 24px;&#10;        }&#10;        &#10;        .notification.success {&#10;          background-color: #f6ffed;&#10;          border: 1px solid #b7eb8f;&#10;          color: #52c41a;&#10;        }&#10;        &#10;        .notification.warning {&#10;          background-color: #fffbe6;&#10;          border: 1px solid #ffe58f;&#10;          color: #faad14;&#10;        }&#10;        &#10;        .notification.danger {&#10;          background-color: #fff2f0;&#10;          border: 1px solid #ffccc7;&#10;          color: #ff4d4f;&#10;        }&#10;        &#10;        .notification.info {&#10;          background-color: #e6f7ff;&#10;          border: 1px solid #91d5ff;&#10;          color: #1890ff;&#10;        }&#10;        &#10;        .notification-content {&#10;          flex: 1;&#10;          font-size: 14px;&#10;          font-weight: 500;&#10;        }&#10;        &#10;        .notification-close {&#10;          margin-left: 12px;&#10;          cursor: pointer;&#10;          font-size: 16px;&#10;          opacity: 0.7;&#10;          transition: opacity 0.2s;&#10;        }&#10;        &#10;        .notification-close:hover {&#10;          opacity: 1;&#10;        }&#10;        .avatar{width:56px;height:56px;object-fit:cover;border-radius:50%;border:2px solid #e3e3e3;background:#fff;}&#10;        /* Navbar logo (inline with brand text) */&#10;        .navbar-brand{display:flex;align-items:center;gap:.5rem;font-weight:bold;font-size:1.25rem;color:white!important}&#10;        .nav-logo{height:48px;object-fit:contain;display:inline-block;background:transparent;border-radius:0;border:0;padding:0;margin:0}&#10;        @media (max-width:768px){ .nav-logo{height:32px} .navbar-brand{font-size:1rem} }&#10;        .hide{display:none!important;}&#10;        .panel{display:none;}&#10;        .navbar{background: linear-gradient(90deg,#2A5298 0%,#1e3c72 100%);}&#10;        .navbar-brand{font-weight:bold;font-size:1.3rem;color:white!important;}&#10;        /* 登录/注册美化 */&#10;        .auth-card{border:0;border-radius:1rem;box-shadow:0 12px 30px rgba(0,0,0,.08)!important;background:#ffffff;}&#10;        .auth-title{font-weight:700;letter-spacing:.5px;}&#10;        .auth-subtitle{color:#6c757d}&#10;        .auth-input{height:48px;border-radius:.75rem;padding-left: 1rem;transition:all 0.3s;border: 1px solid #e1e5e9;}&#10;        .auth-input:focus{border-color: #1890ff;box-shadow: 0 0 0 3px rgba(24,144,255,.15);}&#10;        .auth-btn{height:48px;border-radius:.75rem;transition: all 0.3s;}&#10;        .auth-btn:hover{transform: translateY(-2px);box-shadow: 0 4px 8px rgba(24,144,255,.3);}&#10;        .link-muted{color:#6c757d;text-decoration:none}&#10;        .link-muted:hover{color:#0d6efd;text-decoration:underline}&#10;        /* 极简登录 */&#10;        .auth-minimal{max-width:360px;margin:2vh auto;background:transparent;box-shadow:none!important;border:0;}&#10;        /* 登录卡片美化 */&#10;        .login-container{display:flex;justify-content:center;align-items:center;min-height:60vh;}&#10;        /* 活动详情样式 */&#10;        .activity-detail {background: white; border-radius: 10px; padding: 20px; margin: 20px 0;}&#10;        .activity-title {font-size: 1.5rem; font-weight: bold; color: #2A5298; margin-bottom: 15px;}&#10;        .activity-info {margin-bottom: 10px;}&#10;        .activity-description {margin: 20px 0; padding: 15px; background-color: #f8f9fa; border-radius: 5px;}&#10;        /* 我的信息（个人资料）美化 */&#10;        .profile-card{max-width:820px;margin:1.5rem auto;padding:28px;border-radius:12px;background:#fff;border:1px solid rgba(20,40,60,0.04)}&#10;        .profile-card .avatar{width:72px;height:72px;border-radius:12px;border:1px solid #eef2f6}&#10;        .profile-field .form-label{font-weight:600;color:#495057}&#10;        .profile-input{height:52px;border-radius:10px;padding:.75rem 1rem;box-shadow:0 6px 18px rgba(16,46,86,0.03);border:1px solid #e6eef8}&#10;        .profile-actions{margin-top:18px;display:flex;gap:12px}&#10;        .profile-actions .btn-primary{min-width:160px}&#10;        @media (max-width:768px){ .profile-card{padding:18px} .profile-input{height:48px} .profile-actions{flex-direction:column} }&#10;        /* 审核状态标签样式 */&#10;        .status-pending {background-color: #ffc107 !important; color: #000 !important;}&#10;        .status-approved {background-color: #198754 !important;}&#10;        .status-rejected {background-color: #dc3545 !important;}&#10;        &#10;        /* 新增Ant Design风格样式 */&#10;        .ant-btn {&#10;          display: inline-block;&#10;          font-weight: 400;&#10;          text-align: center;&#10;          cursor: pointer;&#10;          border: 1px solid transparent;&#10;          white-space: nowrap;&#10;          padding: 8px 16px;&#10;          font-size: 14px;&#10;          border-radius: 4px;&#10;          height: 36px;&#10;          transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);&#10;        }&#10;        &#10;        .ant-btn-primary {&#10;          color: #fff;&#10;          background: #1890ff;&#10;          border-color: #1890ff;&#10;        }&#10;        &#10;        .ant-btn-success {&#10;          color: #fff;&#10;          background: #52c41a;&#10;          border-color: #52c41a;&#10;        }&#10;        &#10;        .ant-btn-warning {&#10;          color: #fff;&#10;          background: #faad14;&#10;          border-color: #faad14;&#10;        }&#10;        &#10;        .ant-btn-danger {&#10;          color: #fff;&#10;          background: #ff4d4f;&#10;          border-color: #ff4d4f;&#10;        }&#10;        &#10;        .ant-btn-default {&#10;          color: #000;&#10;          background: #fff;&#10;          border-color: #d9d9d9;&#10;        }&#10;        &#10;        .ant-card {&#10;          border-radius: 8px;&#10;          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.09);&#10;          background: #fff;&#10;          border: 1px solid #f0f0f0;&#10;        }&#10;        &#10;        .ant-card-hoverable {&#10;          transition: box-shadow 0.3s, border-color 0.3s;&#10;        }&#10;        &#10;        .ant-card-hoverable:hover {&#10;          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);&#10;          border-color: #e8e8e8;&#10;        }&#10;        &#10;        /* TailwindCSS辅助类 */&#10;        .tw-transition {&#10;          transition: all 0.2s ease-in-out;&#10;        }&#10;        &#10;        /* 新增样式 */&#10;        .activity-card {&#10;          border-radius: 0.75rem;&#10;          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);&#10;          background: #ffffff;&#10;          border: 1px solid #e5e7eb;&#10;          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);&#10;        }&#10;        &#10;        .activity-card:hover {&#10;          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);&#10;          border-color: #d1d5db;&#10;        }&#10;        &#10;        /* 登录/注册表单标签样式 */&#10;        .form-label {&#10;          margin-bottom: 0.5rem;&#10;          font-weight: 500;&#10;        }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body class=&quot;bg-gray-50&quot;&gt;&#10;&#10;&lt;nav class=&quot;navbar navbar-expand-lg shadow&quot;&gt;&#10;   &lt;div class=&quot;container-fluid&quot;&gt;&#10;    &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;&#10;      &lt;img src=&quot;/resources/images/whut.png&quot; alt=&quot;WHUT&quot; class=&quot;nav-logo&quot; /&gt;&#10;      &lt;span class=&quot;brand-text&quot;&gt;校园活动报名系统&lt;/span&gt;&#10;    &lt;/a&gt;&#10;     &lt;div class=&quot;d-flex align-items-center&quot;&gt;&#10;      &lt;!-- 用户头像和用户名移到导航栏左侧 --&gt;&#10;      &lt;template v-if=&quot;state.user&quot;&gt;&#10;        &lt;img :src=&quot;state.user.avatar||'/default-avatar.png'&quot; class=&quot;avatar me-2&quot; alt=&quot;头像&quot;/&gt;&#10;        &lt;span class=&quot;me-3 text-white&quot;&gt;{{ state.user.username }}&lt;/span&gt;&#10;      &lt;/template&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/nav&gt;&#10;&lt;!-- Modern notification container --&gt;&#10;&lt;div class=&quot;notification-container&quot; id=&quot;notificationContainer&quot;&gt;&lt;/div&gt;&#10;&#10;&lt;!-- Legacy notification bar (kept for compatibility) --&gt;&#10;&lt;div id=&quot;notifyBar&quot; class=&quot;alert&quot;&gt;&lt;/div&gt;&#10;&lt;!-- 统一由 Vue 渲染 --&gt;&#10;&lt;!-- 用户主界面 --&gt;&#10;&lt;div id=&quot;mainPanel&quot; class=&quot;shadow centered p-1&quot;&gt;&#10;  &lt;div id=&quot;app&quot;&gt;&#10;    &lt;div class=&quot;d-flex justify-content-between align-items-center mb-3&quot;&gt;&#10;      &lt;div&gt;&#10;        &lt;!-- User avatar and username on the left --&gt;&#10;        &lt;template v-if=&quot;state.user&quot;&gt;&#10;          &lt;img :src=&quot;state.user.avatar||'/default-avatar.png'&quot; class=&quot;avatar me-2&quot; alt=&quot;头像&quot;/&gt;&#10;          &lt;span class=&quot;me-2&quot;&gt;{{ state.user.username }}&lt;/span&gt;&#10;        &lt;/template&gt;&#10;      &lt;/div&gt;&#10;      &lt;div&gt;&#10;        &lt;!-- Navigation buttons on the right --&gt;&#10;        &lt;template v-if=&quot;state.user&quot;&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;setView('activities')&quot;&gt;活动报名&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;openPublish()&quot;&gt;发布活动&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;state.view='myact'&quot;&gt;我的活动&lt;/button&gt;&#10;          &lt;button v-if=&quot;state.user.role === 'admin'&quot; class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;setView('activityManagement')&quot;&gt;活动管理&lt;/button&gt;&#10;          &lt;button v-if=&quot;state.user.role === 'admin'&quot; class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;setView('userManagement')&quot;&gt;用户管理&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;state.view='myreg'&quot;&gt;我的报名&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;state.view='user'&quot;&gt;我的信息&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-danger tw-transition&quot; @click=&quot;logout&quot;&gt;退出&lt;/button&gt;&#10;        &lt;/template&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 首页 Hero 欢迎横幅：在 welcome 或 activities 视图显示 --&gt;&#10;    &lt;div class=&quot;hero-banner&quot; v-if=&quot;(state.view==='welcome' )&quot;&gt;&#10;      &lt;div class=&quot;d-flex justify-content-between align-items-center flex-wrap&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;div class=&quot;hero-title&quot;&gt;欢迎来到 校园活动报名系统&lt;/div&gt;&#10;          &lt;div class=&quot;hero-sub&quot;&gt;发现并参与最新的校园活动 —— 简单、快捷、安全。&lt;/div&gt;&#10;          &lt;div class=&quot;hero-ctas mt-3 d-flex gap-2&quot;&gt;&#10;            &lt;button v-if=&quot;state.user&quot; class=&quot;ant-btn ant-btn-primary ant-btn-lg&quot; @click=&quot;state.view='publish'&quot;&gt;发布活动&lt;/button&gt;&#10;            &lt;template v-else&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-default ant-btn-lg&quot; @click=&quot;state.view='register'&quot;&gt;注册账号&lt;/button&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-primary ant-btn-lg&quot; @click=&quot;state.view='login'&quot;&gt;登录&lt;/button&gt;&#10;            &lt;/template&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动列表卡片形式 --&gt;&#10;    &lt;div v-if=&quot;(state.view==='activities' || !state.view) &amp;&amp; state.user&quot;&gt;&#10;      &lt;div class=&quot;card&quot;&gt;&#10;        &lt;div class=&quot;card-header&quot;&gt;&#10;          &lt;h5 class=&quot;mb-0&quot;&gt;活动列表&lt;/h5&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;card-body&quot;&gt;&#10;          &lt;!-- 网格布局显示活动 --&gt;&#10;          &lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;&#10;            &lt;div class=&quot;activity-card ant-card-hoverable rounded-xl overflow-hidden&quot; v-for=&quot;a in activities&quot; :key=&quot;a.activityId&quot;&gt;&#10;              &lt;div class=&quot;p-5 h-full flex flex-col bg-white&quot;&gt;&#10;                &lt;h5 class=&quot;text-indigo-600 font-bold text-lg mb-3&quot;&gt;{{ a.activityName }}&lt;/h5&gt;&#10;                &lt;div class=&quot;flex-grow&quot;&gt;&#10;                  &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                    &lt;i class=&quot;far fa-calendar-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                    时间：{{ (a.startTime||'').replace('T',' ') }} ~ {{ (a.endTime||'').replace('T',' ') }}&#10;                  &lt;/p&gt;&#10;                  &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-map-marker-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                    地点：{{ a.location }}&#10;                  &lt;/p&gt;&#10;                  &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-user mr-2&quot;&gt;&lt;/i&gt;&#10;                    发布者：{{ a.publisherName || a.publisherId }}&#10;                  &lt;/p&gt;&#10;                  &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-users mr-2&quot;&gt;&lt;/i&gt;&#10;                    人数：{{ a.count||0 }}/{{ a.maxNum||0 }}&#10;                  &lt;/p&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;flex justify-between mt-4 space-x-2&quot;&gt;&#10;                  &lt;button &#10;                    class=&quot;flex-1 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot;&#10;                    @click=&quot;showActivityDetail(a)&quot;&#10;                  &gt;&#10;                    查看详情&#10;                  &lt;/button&gt;&#10;                  &lt;button &#10;                    class=&quot;flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; &#10;                    @click=&quot;apply(a.activityId, a.maxNum, a.count)&quot;&#10;                    :disabled=&quot;a.status !== 'approved'&quot;&gt;&#10;                    报名&#10;                  &lt;/button&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 无数据提示 --&gt;&#10;          &lt;div v-if=&quot;activities.length === 0&quot; class=&quot;text-center text-muted py-4&quot;&gt;&#10;            暂无活动&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 活动列表分页控件 --&gt;&#10;          &lt;div class=&quot;pagination-container mt-4&quot; v-if=&quot;activityPagination.totalPages &gt; 1&quot;&gt;&#10;            &lt;nav aria-label=&quot;活动列表分页&quot;&gt;&#10;              &lt;ul class=&quot;pagination justify-content-center&quot;&gt;&#10;                &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: activityPagination.page &lt;= 1 }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadActivitiesWithPagination(activityPagination.page - 1, activityPagination.pageSize)&quot;&gt;上一页&lt;/a&gt;&#10;                &lt;/li&gt;&#10;                &#10;                &lt;li class=&quot;page-item&quot; v-for=&quot;n in getPageNumbers()&quot; :key=&quot;n&quot; :class=&quot;{ active: n === activityPagination.page }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadActivitiesWithPagination(n, activityPagination.pageSize)&quot;&gt;{{ n }}&lt;/a&gt;&#10;                &lt;/li&gt;&#10;                &#10;                &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: activityPagination.page &gt;= activityPagination.totalPages }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadActivitiesWithPagination(activityPagination.page + 1, activityPagination.pageSize)&quot;&gt;下一页&lt;/a&gt;&#10;                &lt;/li&gt;&#10;              &lt;/ul&gt;&#10;            &lt;/nav&gt;&#10;            &#10;            &lt;div class=&quot;text-center text-muted small&quot;&gt;&#10;              共 {{ activityPagination.total }} 条记录，第 {{ activityPagination.page }} / {{ activityPagination.totalPages }} 页&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动管理列表 --&gt;&#10;    &lt;div v-if=&quot;state.view==='activityManagement' &amp;&amp; state.user &amp;&amp; state.user.role === 'admin'&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-orange-500 font-bold text-lg&quot;&gt;活动管理&lt;/h5&gt;&#10;      &lt;div v-if=&quot;pendingActivities.length===0&quot; class=&quot;text-muted p-4 text-center bg-white rounded&quot;&gt;暂无活动&lt;/div&gt;&#10;      &lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;&#10;        &lt;div class=&quot;activity-card ant-card-hoverable rounded-xl overflow-hidden&quot; v-for=&quot;a in pendingActivities&quot; :key=&quot;a.activityId&quot;&gt;&#10;          &lt;div class=&quot;p-5 h-full flex flex-col bg-white&quot;&gt;&#10;            &lt;h5 class=&quot;text-indigo-600 font-bold text-lg mb-3&quot;&gt;{{ a.activityName }}&lt;/h5&gt;&#10;            &lt;div class=&quot;flex-grow&quot;&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;far fa-calendar-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                时间：{{ (a.startTime||'').replace('T',' ') }} ~ {{ (a.endTime||'').replace('T',' ') }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;fas fa-map-marker-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                地点：{{ a.location }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;fas fa-users mr-2&quot;&gt;&lt;/i&gt;&#10;                人数：{{ a.count||0 }}/{{ a.maxNum||0 }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;fas fa-user mr-2&quot;&gt;&lt;/i&gt;&#10;                发布者：{{ a.publisherName || a.publisherId }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-3&quot;&gt;&#10;                &lt;i class=&quot;fas fa-info-circle mr-2&quot;&gt;&lt;/i&gt;&#10;                状态：&#10;                &lt;span v-if=&quot;a.status === 'pending'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;待审核&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;a.status === 'approved'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;flex justify-between mt-4 space-x-2&quot;&gt;&#10;              &lt;button &#10;                class=&quot;flex-1 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot;&#10;                @click=&quot;showActivityDetail(a)&quot;&#10;              &gt;&#10;                查看详情&#10;              &lt;/button&gt;&#10;              &lt;div class=&quot;flex space-x-2&quot;&gt;&#10;                &lt;button v-if=&quot;a.status === 'pending'&quot; class=&quot;flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; @click=&quot;reviewActivity(a.activityId, 'approved')&quot;&gt;通过&lt;/button&gt;&#10;                &lt;button v-if=&quot;a.status === 'pending'&quot; class=&quot;flex-1 bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; @click=&quot;reviewActivity(a.activityId, 'rejected')&quot;&gt;拒绝&lt;/button&gt;&#10;                &lt;button class=&quot;flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; @click=&quot;deleteActivity(a.activityId)&quot;&gt;删除&lt;/button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动详情页面 --&gt;&#10;    &lt;div class=&quot;activity-detail&quot; v-if=&quot;state.view==='activityDetail' &amp;&amp; selectedActivity&quot;&gt;&#10;      &lt;div class=&quot;d-flex justify-content-between align-items-center mb-3&quot;&gt;&#10;        &lt;h2 class=&quot;activity-title&quot;&gt;{{ selectedActivity.activityName }}&lt;/h2&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;backToPreviousView()&quot;&gt;&amp;laquo; 返回&lt;/button&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;活动ID:&lt;/strong&gt; {{ selectedActivity.activityId }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;活动时间:&lt;/strong&gt; {{ (selectedActivity.startTime||'').replace('T',' ') }} ~ {{ (selectedActivity.endTime||'').replace('T',' ') }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;活动地点:&lt;/strong&gt; {{ selectedActivity.location }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;报名人数:&lt;/strong&gt; {{ selectedActivity.count||0 }}/{{ selectedActivity.maxNum||0 }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;发布者:&lt;/strong&gt; {{ selectedActivity.publisherName || selectedActivity.publisherId }}&#10;      &lt;/div&gt;&#10;&#10;&lt;!--      &lt;div class=&quot;activity-info&quot;&gt;--&gt;&#10;&lt;!--        &lt;strong&gt;状态:&lt;/strong&gt; --&gt;&#10;&lt;!--        &lt;span v-if=&quot;selectedActivity.status === 'pending'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;待审核&lt;/span&gt;--&gt;&#10;&lt;!--        &lt;span v-else-if=&quot;selectedActivity.status === 'approved'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;--&gt;&#10;&lt;!--        &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;--&gt;&#10;&lt;!--      &lt;/div&gt;--&gt;&#10;&#10;      &lt;div class=&quot;activity-description&quot;&gt;&#10;        &lt;h5&gt;活动简介&lt;/h5&gt;&#10;        &lt;p&gt;{{ selectedActivity.description }}&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;flex gap-2 mt-3&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-success&quot; @click=&quot;apply(selectedActivity.activityId, selectedActivity.maxNum, selectedActivity.count)&quot; :disabled=&quot;selectedActivity.status !== 'approved'&quot;&gt;报名参加&lt;/button&gt;&#10;        &lt;div v-if=&quot;state.user &amp;&amp; state.user.role === 'admin' &amp;&amp; selectedActivity.status === 'pending'&quot;&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-success mr-1&quot; @click=&quot;reviewActivity(selectedActivity.activityId, 'approved')&quot;&gt;通过&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-danger&quot; @click=&quot;reviewActivity(selectedActivity.activityId, 'rejected')&quot;&gt;拒绝&lt;/button&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 用户管理界面 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='userManagement' &amp;&amp; state.user &amp;&amp; state.user.role === 'admin'&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-blue-500 font-bold text-lg&quot;&gt;用户管理&lt;/h5&gt;&#10;      &#10;      &lt;!-- 搜索框 --&gt;&#10;      &lt;div class=&quot;card mb-4&quot;&gt;&#10;        &lt;div class=&quot;card-body&quot;&gt;&#10;          &lt;div class=&quot;row g-2&quot;&gt;&#10;            &lt;div class=&quot;col-md-4&quot;&gt;&#10;              &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;输入用户名进行搜索&quot; v-model=&quot;searchKeyword&quot; @keyup.enter=&quot;searchUsers&quot;&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;col-md-2&quot;&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;searchUsers&quot;&gt;搜索&lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;col-md-2&quot;&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;resetSearch&quot;&gt;重置&lt;/button&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &#10;      &lt;!-- 用户列表 --&gt;&#10;      &lt;div class=&quot;card&quot;&gt;&#10;        &lt;div class=&quot;card-header&quot;&gt;&#10;          &lt;h6 class=&quot;mb-0&quot;&gt;用户列表&lt;/h6&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;card-body&quot;&gt;&#10;          &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;            &lt;table class=&quot;table table-bordered text-center align-middle&quot;&gt;&#10;              &lt;thead&gt;&#10;                &lt;tr&gt;&#10;                  &lt;th&gt;用户ID&lt;/th&gt;&#10;                  &lt;th&gt;用户名&lt;/th&gt;&#10;                  &lt;th&gt;邮箱&lt;/th&gt;&#10;                  &lt;th&gt;角色&lt;/th&gt;&#10;                &lt;/tr&gt;&#10;              &lt;/thead&gt;&#10;              &lt;tbody&gt;&#10;                &lt;tr v-for=&quot;user in userList&quot; :key=&quot;user.userId&quot; &#10;                    @click=&quot;selectUser(user)&quot; &#10;                    :class=&quot;{ 'table-primary': selectedUser &amp;&amp; selectedUser.userId === user.userId }&quot;&#10;                    style=&quot;cursor: pointer;&quot;&gt;&#10;                  &lt;td&gt;{{ user.userId }}&lt;/td&gt;&#10;                  &lt;td&gt;{{ user.username }}&lt;/td&gt;&#10;                  &lt;td&gt;{{ user.email }}&lt;/td&gt;&#10;                  &lt;td&gt;&#10;                    &lt;span v-if=&quot;user.role === 'admin'&quot; class=&quot;bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;管理员&lt;/span&gt;&#10;                    &lt;span v-else class=&quot;bg-gray-100 text-gray-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;普通用户&lt;/span&gt;&#10;                  &lt;/td&gt;&#10;                &lt;/tr&gt;&#10;              &lt;/tbody&gt;&#10;            &lt;/table&gt;&#10;            &#10;            &lt;!-- 无数据提示 --&gt;&#10;            &lt;div v-if=&quot;userList.length === 0&quot; class=&quot;text-center text-muted py-4&quot;&gt;&#10;              暂无用户数据&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 操作按钮 --&gt;&#10;          &lt;div class=&quot;mt-3 d-flex justify-content-between&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-danger&quot; &#10;                      :disabled=&quot;!selectedUser&quot; &#10;                      @click=&quot;confirmDeleteUser&quot;&gt;&#10;                &lt;i class=&quot;fas fa-trash-alt me-1&quot;&gt;&lt;/i&gt;删除用户&#10;              &lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;span v-if=&quot;selectedUser&quot; class=&quot;text-muted small&quot;&gt;&#10;                已选中: {{ selectedUser.username }} (ID: {{ selectedUser.userId }})&#10;              &lt;/span&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 角色修改区域 --&gt;&#10;          &lt;div class=&quot;mt-3 p-3 bg-light rounded&quot; v-if=&quot;selectedUser&quot;&gt;&#10;            &lt;div class=&quot;row g-2 align-items-center&quot;&gt;&#10;              &lt;div class=&quot;col-md-3&quot;&gt;&#10;                &lt;label class=&quot;form-label small mb-0&quot;&gt;当前角色:&lt;/label&gt;&#10;                &lt;input type=&quot;text&quot; class=&quot;form-control form-control-sm&quot; &#10;                       :value=&quot;selectedUser.role === 'admin' ? '管理员' : '普通用户'&quot; &#10;                       readonly&gt;&#10;              &lt;/div&gt;&#10;              &lt;div class=&quot;col-md-3&quot;&gt;&#10;                &lt;label class=&quot;form-label small mb-0&quot;&gt;新角色:&lt;/label&gt;&#10;                &lt;select class=&quot;form-control form-control-sm&quot; &#10;                        v-model=&quot;newRole&quot; &#10;                        :disabled=&quot;selectedUser.userId === state.user.userId&quot;&gt;&#10;                  &lt;option value=&quot;user&quot;&gt;普通用户&lt;/option&gt;&#10;                  &lt;option value=&quot;admin&quot;&gt;管理员&lt;/option&gt;&#10;                &lt;/select&gt;&#10;              &lt;/div&gt;&#10;              &lt;div class=&quot;col-md-3&quot;&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-primary ant-btn-sm mt-4&quot; &#10;                        :disabled=&quot;!selectedUser || newRole === selectedUser.role || selectedUser.userId === state.user.userId&quot;&#10;                        @click=&quot;confirmUpdateRole&quot;&gt;&#10;                  确认修改&#10;                &lt;/button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mt-2 small text-warning&quot; v-if=&quot;selectedUser &amp;&amp; selectedUser.userId === state.user.userId&quot;&gt;&#10;              &lt;i class=&quot;fas fa-exclamation-circle me-1&quot;&gt;&lt;/i&gt;不能修改自己的角色&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 分页控件 --&gt;&#10;          &lt;div class=&quot;pagination-container mt-4&quot; v-if=&quot;pagination.totalPages &gt; 1&quot;&gt;&#10;            &lt;nav aria-label=&quot;用户列表分页&quot;&gt;&#10;              &lt;ul class=&quot;pagination justify-content-center&quot;&gt;&#10;                &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: pagination.page &lt;= 1 }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadUserList(pagination.page - 1, pagination.pageSize)&quot;&gt;上一页&lt;/a&gt;&#10;                &lt;/li&gt;&#10;                &#10;                &lt;li class=&quot;page-item&quot; v-for=&quot;n in getPageNumbers()&quot; :key=&quot;n&quot; :class=&quot;{ active: n === pagination.page }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadUserList(n, pagination.pageSize)&quot;&gt;{{ n }}&lt;/a&gt;&#10;                &lt;/li&gt;&#10;                &#10;                &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: pagination.page &gt;= pagination.totalPages }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadUserList(pagination.page + 1, pagination.pageSize)&quot;&gt;下一页&lt;/a&gt;&#10;                &lt;/li&gt;&#10;              &lt;/ul&gt;&#10;            &lt;/nav&gt;&#10;            &#10;            &lt;div class=&quot;text-center text-muted small&quot;&gt;&#10;              共 {{ pagination.total }} 条记录，第 {{ pagination.page }} / {{ pagination.totalPages }} 页&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &#10;    &lt;!-- 编辑用户模态框 --&gt;&#10;    &lt;div class=&quot;modal fade&quot; id=&quot;editUserModal&quot; tabindex=&quot;-1&quot; v-if=&quot;state.view==='userManagement' &amp;&amp; state.user &amp;&amp; state.user.role === 'admin'&quot;&gt;&#10;      &lt;div class=&quot;modal-dialog&quot;&gt;&#10;        &lt;div class=&quot;modal-content&quot;&gt;&#10;          &lt;div class=&quot;modal-header&quot;&gt;&#10;            &lt;h5 class=&quot;modal-title&quot;&gt;编辑用户&lt;/h5&gt;&#10;            &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;&#10;          &lt;/div&gt;&#10;          &lt;div class=&quot;modal-body&quot;&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;用户ID&lt;/label&gt;&#10;              &lt;input class=&quot;form-control&quot; v-model=&quot;editingUser.userId&quot; readonly&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;用户名&lt;/label&gt;&#10;              &lt;input class=&quot;form-control&quot; v-model=&quot;editingUser.username&quot;&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;邮箱&lt;/label&gt;&#10;              &lt;input class=&quot;form-control&quot; v-model=&quot;editingUser.email&quot;&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;角色&lt;/label&gt;&#10;              &lt;select class=&quot;form-control&quot; v-model=&quot;editingUser.role&quot;&gt;&#10;                &lt;option value=&quot;user&quot;&gt;普通用户&lt;/option&gt;&#10;                &lt;option value=&quot;admin&quot;&gt;管理员&lt;/option&gt;&#10;              &lt;/select&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &lt;div class=&quot;modal-footer&quot;&gt;&#10;            &lt;button type=&quot;button&quot; class=&quot;ant-btn ant-btn-default&quot; data-bs-dismiss=&quot;modal&quot;&gt;取消&lt;/button&gt;&#10;            &lt;button type=&quot;button&quot; class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;updateUser&quot;&gt;保存&lt;/button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &#10;    &lt;!-- 首页 Hero 欢迎横幅 --&gt;&#10;    &lt;div class=&quot;hero-banner&quot; v-if=&quot;state.view==='login' || state.view==='register'&quot;&gt;&#10;      &lt;div class=&quot;d-flex justify-content-center align-items-center flex-wrap text-center&quot;&gt;&#10;        &lt;div class=&quot;w-100&quot;&gt;&#10;          &lt;div class=&quot;hero-title&quot;&gt;欢迎来到 校园活动报名系统&lt;/div&gt;&#10;          &lt;div class=&quot;hero-sub&quot;&gt;发现并参与最新的校园活动 —— 简单、快捷、安全。&lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 登录 --&gt;&#10;    &lt;div class=&quot;auth-card auth-minimal p-1&quot; v-if=&quot;state.view==='login'&quot;&gt;&#10;      &lt;div class=&quot;text-center mb-4&quot;&gt;&#10;        &lt;div class=&quot;auth-title fs-4 text-indigo-600 font-bold&quot;&gt;用户登录&lt;/div&gt;&#10;        &lt;div class=&quot;auth-subtitle small text-gray-500&quot;&gt;欢迎回来，请输入您的账户信息&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-3&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;用户名&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;loginForm.username&quot; placeholder=&quot;请输入用户名&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-4&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;密码&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;loginForm.password&quot; type=&quot;password&quot; placeholder=&quot;请输入密码&quot; @keyup.enter=&quot;doLogin&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-primary w-full auth-btn py-2 rounded-lg font-medium&quot; @click=&quot;doLogin&quot;&gt;登录&lt;/button&gt;&#10;      &lt;div class=&quot;text-center mt-3 small&quot;&gt;&#10;        还没有账户？ &lt;a href=&quot;javascript:void(0)&quot; class=&quot;link-muted&quot; @click=&quot;state.view='register'&quot;&gt;立即注册&lt;/a&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 注册 --&gt;&#10;    &lt;div class=&quot;auth-card centered p-4 mt-4&quot; v-if=&quot;state.view==='register'&quot;&gt;&#10;      &lt;div class=&quot;text-center mb-4&quot;&gt;&#10;        &lt;div class=&quot;auth-title fs-4 text-green-600 font-bold&quot;&gt;创建账户&lt;/div&gt;&#10;        &lt;div class=&quot;auth-subtitle small text-gray-500&quot;&gt;填写以下信息完成注册&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-3&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;用户名&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;regForm.username&quot; placeholder=&quot;请输入用户名&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-3&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;密码&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;regForm.password&quot; type=&quot;password&quot; placeholder=&quot;请输入密码&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-4&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;邮箱&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;regForm.email&quot; type=&quot;email&quot; placeholder=&quot;请输入邮箱地址&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-success w-full auth-btn py-2 rounded-lg font-medium&quot; @click=&quot;doRegister&quot;&gt;注册&lt;/button&gt;&#10;      &lt;div class=&quot;text-center mt-3 small&quot;&gt;&#10;        已有账号？ &lt;a href=&quot;javascript:void(0)&quot; class=&quot;link-muted&quot; @click=&quot;state.view='login'&quot;&gt;去登录&lt;/a&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 我的信息 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4 profile-card&quot; v-if=&quot;state.view==='user' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3&quot;&gt;我的信息&lt;/h5&gt;&#10;      &lt;div class=&quot;d-flex align-items-center gap-3 mb-3&quot;&gt;&#10;        &lt;img :src=&quot;profile.avatar&quot; class=&quot;avatar&quot; alt=&quot;头像&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;div style=&quot;font-weight:700;font-size:1.05rem;color:#212529&quot;&gt;{{ profile.username || state.user.username }}&lt;/div&gt;&#10;          &lt;div class=&quot;small text-muted&quot;&gt;角色: {{ state.user.role === 'admin' ? '管理员' : '普通用户' }}&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div style=&quot;margin-left:auto;display:flex;flex-direction:column;align-items:flex-end;gap:6px&quot;&gt;&#10;          &lt;label for=&quot;avatarFile&quot; class=&quot;ant-btn ant-btn-primary&quot; style=&quot;cursor:pointer&quot;&gt;上传头像&lt;/label&gt;&#10;          &lt;small class=&quot;text-muted&quot;&gt;支持 JPG/PNG，最大 2MB&lt;/small&gt;&#10;          &lt;input id=&quot;avatarFile&quot; type=&quot;file&quot; accept=&quot;image/*&quot; style=&quot;position:absolute;left:-9999px;&quot; aria-label=&quot;上传头像文件&quot; @change=&quot;uploadAvatar($event)&quot;&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;mb-3 profile-field&quot;&gt;&#10;        &lt;label class=&quot;form-label&quot;&gt;用户ID&lt;/label&gt;&#10;        &lt;input class=&quot;form-control profile-input&quot; :value=&quot;state.user.userId&quot; readonly&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;mb-3 profile-field&quot;&gt;&#10;        &lt;label class=&quot;form-label&quot;&gt;用户名&lt;/label&gt;&#10;        &lt;input class=&quot;form-control profile-input&quot; v-model.trim=&quot;profile.username&quot; placeholder=&quot;用户名&quot;&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;mb-3 profile-field&quot;&gt;&#10;        &lt;label class=&quot;form-label&quot;&gt;注册邮箱&lt;/label&gt;&#10;        &lt;input class=&quot;form-control profile-input&quot; :value=&quot;profile.email&quot; readonly&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;profile-actions&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;updateInfo&quot;&gt;保存信息&lt;/button&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;state.view='pwd'&quot;&gt;修改密码&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 修改密码 --&gt;&#10;    &lt;!-- 发布/编辑活动 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='publish' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3&quot; v-text=&quot;pubForm.activityId ? '编辑活动' : '发布新活动'&quot;&gt;&lt;/h5&gt;&#10;      &lt;label class=&quot;form-label small text-muted&quot;&gt;活动名称&lt;/label&gt;&#10;      &lt;input class=&quot;form-control mb-2&quot; v-model.trim=&quot;pubForm.name&quot; placeholder=&quot;活动名称&quot;&gt;&#10;      &lt;label class=&quot;form-label small text-muted&quot;&gt;活动简介&lt;/label&gt;&#10;      &lt;input class=&quot;form-control mb-2&quot; v-model.trim=&quot;pubForm.desc&quot; placeholder=&quot;活动简介&quot;&gt;&#10;      &lt;label class=&quot;form-label small text-muted&quot;&gt;活动地点&lt;/label&gt;&#10;      &lt;input class=&quot;form-control mb-2&quot; v-model.trim=&quot;pubForm.location&quot; placeholder=&quot;活动地点&quot;&gt;&#10;      &lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-2&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;label class=&quot;form-label small text-muted&quot;&gt;开始时间&lt;/label&gt;&#10;          &lt;input type=&quot;datetime-local&quot; class=&quot;form-control&quot; v-model=&quot;pubForm.startTime&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div&gt;&#10;          &lt;label class=&quot;form-label small text-muted&quot;&gt;结束时间&lt;/label&gt;&#10;          &lt;input type=&quot;datetime-local&quot; class=&quot;form-control&quot; v-model=&quot;pubForm.endTime&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;label class=&quot;form-label small text-muted mt-2&quot;&gt;最大人数&lt;/label&gt;&#10;      &lt;input type=&quot;number&quot; min=&quot;1&quot; class=&quot;form-control mb-3&quot; v-model.number=&quot;pubForm.maxNum&quot; placeholder=&quot;如：50&quot; /&gt;&#10;      &lt;div class=&quot;flex gap-2&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-primary flex-grow-1&quot; @click=&quot;submitPublish&quot;&gt;提交&lt;/button&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;cancelPublish&quot;&gt;返回&lt;/button&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mt-2 small text-danger&quot; v-if=&quot;pubFormMsg&quot;&gt;{{ pubFormMsg }}&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 我的活动 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='myact' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-green-600&quot;&gt;我发布的活动&lt;/h5&gt;&#10;      &lt;div v-if=&quot;myActs.length===0&quot; class=&quot;text-muted&quot;&gt;你还没有发布活动&lt;/div&gt;&#10;      &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;        &lt;table class=&quot;table table-striped text-center align-middle&quot;&gt;&#10;          &lt;thead&gt;&lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;名称&lt;/th&gt;&lt;th&gt;简介&lt;/th&gt;&lt;th&gt;状态&lt;/th&gt;&lt;th&gt;操作&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;tr v-for=&quot;a in myActs&quot; :key=&quot;a.activityId&quot;&gt;&#10;              &lt;td&gt;&lt;code&gt;{{ a.activityId.slice(0,8) }}&lt;/code&gt;&lt;/td&gt;&#10;              &lt;td&gt;{{ a.activityName }}&lt;/td&gt;&#10;              &lt;td&gt;{{ a.description }}&lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;span v-if=&quot;a.status === 'pending'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;待审核&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;a.status === 'approved'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/td&gt;&#10;              &lt;td&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-primary ant-btn-sm mr-1&quot; @click=&quot;showActivityDetail(activities.find(item =&gt; item.activityId === a.activityId))&quot;&gt;查看&lt;/button&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-default ant-btn-sm mr-1&quot; @click=&quot;editAct(a)&quot;&gt;编辑&lt;/button&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-warning ant-btn-sm mr-1&quot; @click=&quot;openManage(a.activityId)&quot;&gt;管理&lt;/button&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-danger ant-btn-sm&quot; @click=&quot;deleteAct(a.activityId)&quot;&gt;删除&lt;/button&gt;&#10;              &lt;/td&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 我的报名 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='myreg' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-blue-500&quot;&gt;我的报名&lt;/h5&gt;&#10;      &lt;div v-if=&quot;myRegs.length===0&quot; class=&quot;text-muted&quot;&gt;暂无报名记录&lt;/div&gt;&#10;      &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;        &lt;table class=&quot;table table-bordered text-center align-middle&quot;&gt;&#10;          &lt;thead&gt;&lt;tr&gt;&lt;th&gt;报名ID&lt;/th&gt;&lt;th&gt;活动ID&lt;/th&gt;&lt;th&gt;活动名称&lt;/th&gt;&lt;th&gt;状态&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;tr v-for=&quot;r in myRegs&quot; :key=&quot;r.registrationId&quot;&gt;&#10;              &lt;td&gt;&lt;code&gt;{{ r.username || r.userId }}&lt;/code&gt;&lt;/td&gt;&#10;              &lt;td&gt;&lt;a href=&quot;javascript:void(0)&quot; @click=&quot;viewActivityFromReg(r.activityId)&quot;&gt;{{ r.activityId.slice(0,8) }}&lt;/a&gt;&lt;/td&gt;&#10;              &lt;td&gt;{{ r.activityName }}&lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;span v-if=&quot;r.status === '已申请'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已申请&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;r.status === '已通过'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/td&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动报名管理 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='manage' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-orange-500&quot;&gt;活动报名管理&lt;/h5&gt;&#10;      &lt;div class=&quot;input-group mb-3&quot;&gt;&#10;        &lt;span class=&quot;input-group-text&quot;&gt;活动ID&lt;/span&gt;&#10;        &lt;input class=&quot;form-control&quot; :value=&quot;manageState.activityId&quot; readonly /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;input-group mb-3&quot;&gt;&#10;        &lt;input v-model.trim=&quot;manageState.addUserId&quot; class=&quot;form-control&quot; placeholder=&quot;输入用户ID添加报名&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;addReg()&quot;&gt;添加&lt;/button&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;        &lt;table class=&quot;table align-middle&quot;&gt;&#10;          &lt;thead&gt;&lt;tr&gt;&lt;th&gt;报名ID&lt;/th&gt;&lt;th&gt;用户&lt;/th&gt;&lt;th&gt;状态&lt;/th&gt;&lt;th&gt;操作&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;tr v-for=&quot;r in manageState.regs&quot; :key=&quot;r.registrationId&quot;&gt;&#10;              &lt;td&gt;&lt;code&gt;{{ r.registrationId.slice(0,8) }}&lt;/code&gt;&lt;/td&gt;&#10;              &lt;td&gt;{{ r.username || r.userId }}&lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;span v-if=&quot;r.status === '已申请'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已申请&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;r.status === '已通过'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;template v-if=&quot;r.status==='已申请'&quot;&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-success ant-btn-sm mr-1&quot; @click=&quot;reviewReg(r.registrationId,1)&quot;&gt;通过&lt;/button&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-danger ant-btn-sm mr-1&quot; @click=&quot;reviewReg(r.registrationId,0)&quot;&gt;拒绝&lt;/button&gt;&#10;                &lt;/template&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-danger ant-btn-sm&quot; @click=&quot;delReg(r.registrationId)&quot;&gt;删除&lt;/button&gt;&#10;              &lt;/td&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;/div&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;state.view='myact'&quot;&gt;返回我的活动&lt;/button&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='pwd' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3&quot;&gt;修改密码&lt;/h5&gt;&#10;      &lt;input type=&quot;password&quot; class=&quot;form-control mb-2&quot; v-model.trim=&quot;pwdForm.oldPwd&quot; placeholder=&quot;当前密码&quot;&gt;&#10;      &lt;input type=&quot;password&quot; class=&quot;form-control mb-2&quot; v-model.trim=&quot;pwdForm.newPwd&quot; placeholder=&quot;新密码&quot;&gt;&lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;cancelPublish&quot;&gt;返回&lt;/button&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-success w-full&quot; @click=&quot;changePwd&quot;&gt;提交修改&lt;/button&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.prod.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;app-main.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh-CN&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;title&gt;校园活动报名系统&lt;/title&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot;&gt;&#10;    &lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;&#10;    &lt;style&gt;&#10;        body{background:#f4f8fa;}&#10;        .centered{max-width:1100px;margin:2.5rem auto;}&#10;        .shadow{box-shadow:0 2px 12px rgba(34,34,34,.08)!important;}&#10;&#10;        &lt;img :src=&quot;state.user.avatar||'/resources/images/default-avatar.jpg'&quot; class=&quot;avatar me-2&quot; alt=&quot;头像&quot;/&gt;&#10;&#10;        &lt;!-- 修改后 --&gt;&#10;         &lt;img :src=&quot;profile.avatar || '/resources/images/default-avatar.jpg'&quot; class=&quot;avatar&quot; alt=&quot;头像&quot;&gt;&#10;&#10;        .hero-banner{background:linear-gradient(120deg,#2A5298,#1e3c72);color:white;padding:2.2rem;border-radius:12px;margin-bottom:1.5rem;box-shadow:0 8px 30px rgba(33,47,61,.08)}&#10;        .hero-title{font-size:2.5rem;font-weight:800;letter-spacing:0.2px;margin-bottom:.5rem}&#10;        .hero-sub{opacity:.9;margin-bottom:1rem;font-size:1.2rem}&#10;        .hero-ctas .btn{min-width:160px}&#10;        @media (max-width:768px){ .hero-title{font-size:1.8rem} .centered{padding:0 1rem} .hero-sub{font-size:1rem} }&#10;        /* 登录返回按钮位置调整（仅作用于 auth-minimal 登录卡） */&#10;        .auth-card.auth-minimal{position:relative;padding-top:72px}&#10;        /* 左移 40px（从 -20 -&gt; -60），上移 40px（从 6 -&gt; -34） */&#10;        .auth-card.auth-minimal .back-button{position:absolute;left:-320px;top:-60px;z-index:5}&#10;        @media (max-width:576px){ .auth-card.auth-minimal .back-button{left:8px;top:6px} }&#10;        #notifyBar{position:fixed;top:10px;left:0;right:0;z-index:999;text-align:center;display:none;}&#10;        /* Modern notification styles */&#10;        .notification-container {&#10;          position: fixed;&#10;          top: 20px;&#10;          right: 20px;&#10;          z-index: 9999;&#10;        }&#10;        &#10;        .notification {&#10;          min-width: 300px;&#10;          max-width: 400px;&#10;          margin-bottom: 10px;&#10;          border-radius: 8px;&#10;          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);&#10;          transform: translateX(100%);&#10;          opacity: 0;&#10;          transition: all 0.3s ease-in-out;&#10;          display: flex;&#10;          align-items: center;&#10;          padding: 16px;&#10;        }&#10;        &#10;        .notification.show {&#10;          transform: translateX(0);&#10;          opacity: 1;&#10;        }&#10;        &#10;        .notification-icon {&#10;          margin-right: 12px;&#10;          font-size: 24px;&#10;        }&#10;        &#10;        .notification.success {&#10;          background-color: #f6ffed;&#10;          border: 1px solid #b7eb8f;&#10;          color: #52c41a;&#10;        }&#10;        &#10;        .notification.warning {&#10;          background-color: #fffbe6;&#10;          border: 1px solid #ffe58f;&#10;          color: #faad14;&#10;        }&#10;        &#10;        .notification.danger {&#10;          background-color: #fff2f0;&#10;          border: 1px solid #ffccc7;&#10;          color: #ff4d4f;&#10;        }&#10;        &#10;        .notification.info {&#10;          background-color: #e6f7ff;&#10;          border: 1px solid #91d5ff;&#10;          color: #1890ff;&#10;        }&#10;        &#10;        .notification-content {&#10;          flex: 1;&#10;          font-size: 14px;&#10;          font-weight: 500;&#10;        }&#10;        &#10;        .notification-close {&#10;          margin-left: 12px;&#10;          cursor: pointer;&#10;          font-size: 16px;&#10;          opacity: 0.7;&#10;          transition: opacity 0.2s;&#10;        }&#10;        &#10;        .notification-close:hover {&#10;          opacity: 1;&#10;        }&#10;        .avatar{width:56px;height:56px;object-fit:cover;border-radius:50%;border:2px solid #e3e3e3;background:#fff;}&#10;        /* Navbar logo (inline with brand text) */&#10;        .navbar-brand{display:flex;align-items:center;gap:.5rem;font-weight:bold;font-size:1.25rem;color:white!important}&#10;        .nav-logo{height:48px;object-fit:contain;display:inline-block;background:transparent;border-radius:0;border:0;padding:0;margin:0}&#10;        @media (max-width:768px){ .nav-logo{height:32px} .navbar-brand{font-size:1rem} }&#10;        .hide{display:none!important;}&#10;        .panel{display:none;}&#10;        .navbar{background: linear-gradient(90deg,#2A5298 0%,#1e3c72 100%);}&#10;        .navbar-brand{font-weight:bold;font-size:1.3rem;color:white!important;}&#10;        /* 登录/注册美化 */&#10;        .auth-card{border:0;border-radius:1rem;box-shadow:0 12px 30px rgba(0,0,0,.08)!important;background:#ffffff;}&#10;        .auth-title{font-weight:700;letter-spacing:.5px;}&#10;        .auth-subtitle{color:#6c757d}&#10;        .auth-input{height:48px;border-radius:.75rem;padding-left: 1rem;transition:all 0.3s;border: 1px solid #e1e5e9;}&#10;        .auth-input:focus{border-color: #1890ff;box-shadow: 0 0 0 3px rgba(24,144,255,.15);}&#10;        .auth-btn{height:48px;border-radius:.75rem;transition: all 0.3s;}&#10;        .auth-btn:hover{transform: translateY(-2px);box-shadow: 0 4px 8px rgba(24,144,255,.3);}&#10;        .link-muted{color:#6c757d;text-decoration:none}&#10;        .link-muted:hover{color:#0d6efd;text-decoration:underline}&#10;        /* 极简登录 */&#10;        .auth-minimal{max-width:360px;margin:2vh auto;background:transparent;box-shadow:none!important;border:0;}&#10;        /* 登录卡片美化 */&#10;        .login-container{display:flex;justify-content:center;align-items:center;min-height:60vh;}&#10;        /* 活动详情样式 */&#10;        .activity-detail {background: white; border-radius: 10px; padding: 20px; margin: 20px 0;}&#10;        .activity-title {font-size: 1.5rem; font-weight: bold; color: #2A5298; margin-bottom: 15px;}&#10;        .activity-info {margin-bottom: 10px;}&#10;        .activity-description {margin: 20px 0; padding: 15px; background-color: #f8f9fa; border-radius: 5px;}&#10;        /* 我的信息（个人资料）美化 */&#10;        .profile-card{max-width:820px;margin:1.5rem auto;padding:28px;border-radius:12px;background:#fff;border:1px solid rgba(20,40,60,0.04)}&#10;        .profile-card .avatar{width:72px;height:72px;border-radius:12px;border:1px solid #eef2f6}&#10;        .profile-field .form-label{font-weight:600;color:#495057}&#10;        .profile-input{height:52px;border-radius:10px;padding:.75rem 1rem;box-shadow:0 6px 18px rgba(16,46,86,0.03);border:1px solid #e6eef8}&#10;        .profile-actions{margin-top:18px;display:flex;gap:12px}&#10;        .profile-actions .btn-primary{min-width:160px}&#10;        @media (max-width:768px){ .profile-card{padding:18px} .profile-input{height:48px} .profile-actions{flex-direction:column} }&#10;        /* 审核状态标签样式 */&#10;        .status-pending {background-color: #ffc107 !important; color: #000 !important;}&#10;        .status-approved {background-color: #198754 !important;}&#10;        .status-rejected {background-color: #dc3545 !important;}&#10;        &#10;        /* 新增Ant Design风格样式 */&#10;        .ant-btn {&#10;          display: inline-block;&#10;          font-weight: 400;&#10;          text-align: center;&#10;          cursor: pointer;&#10;          border: 1px solid transparent;&#10;          white-space: nowrap;&#10;          padding: 8px 16px;&#10;          font-size: 14px;&#10;          border-radius: 4px;&#10;          height: 36px;&#10;          transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);&#10;        }&#10;        &#10;        .ant-btn-primary {&#10;          color: #fff;&#10;          background: #1890ff;&#10;          border-color: #1890ff;&#10;        }&#10;        &#10;        .ant-btn-success {&#10;          color: #fff;&#10;          background: #52c41a;&#10;          border-color: #52c41a;&#10;        }&#10;        &#10;        .ant-btn-warning {&#10;          color: #fff;&#10;          background: #faad14;&#10;          border-color: #faad14;&#10;        }&#10;        &#10;        .ant-btn-danger {&#10;          color: #fff;&#10;          background: #ff4d4f;&#10;          border-color: #ff4d4f;&#10;        }&#10;        &#10;        .ant-btn-default {&#10;          color: #000;&#10;          background: #fff;&#10;          border-color: #d9d9d9;&#10;        }&#10;        &#10;        .ant-card {&#10;          border-radius: 8px;&#10;          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.09);&#10;          background: #fff;&#10;          border: 1px solid #f0f0f0;&#10;        }&#10;        &#10;        .ant-card-hoverable {&#10;          transition: box-shadow 0.3s, border-color 0.3s;&#10;        }&#10;        &#10;        .ant-card-hoverable:hover {&#10;          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);&#10;          border-color: #e8e8e8;&#10;        }&#10;        &#10;        /* TailwindCSS辅助类 */&#10;        .tw-transition {&#10;          transition: all 0.2s ease-in-out;&#10;        }&#10;        &#10;        /* 新增样式 */&#10;        .activity-card {&#10;          border-radius: 0.75rem;&#10;          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);&#10;          background: #ffffff;&#10;          border: 1px solid #e5e7eb;&#10;          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);&#10;        }&#10;        &#10;        .activity-card:hover {&#10;          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);&#10;          border-color: #d1d5db;&#10;        }&#10;        &#10;        /* 登录/注册表单标签样式 */&#10;        .form-label {&#10;          margin-bottom: 0.5rem;&#10;          font-weight: 500;&#10;        }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body class=&quot;bg-gray-50&quot;&gt;&#10;&#10;&lt;nav class=&quot;navbar navbar-expand-lg shadow&quot;&gt;&#10;   &lt;div class=&quot;container-fluid&quot;&gt;&#10;    &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot;&gt;&#10;      &lt;img src=&quot;/resources/images/whut.png&quot; alt=&quot;WHUT&quot; class=&quot;nav-logo&quot; /&gt;&#10;      &lt;span class=&quot;brand-text&quot;&gt;校园活动报名系统&lt;/span&gt;&#10;    &lt;/a&gt;&#10;     &lt;div class=&quot;d-flex align-items-center&quot;&gt;&#10;      &lt;!-- 用户头像和用户名移到导航栏左侧 --&gt;&#10;      &lt;template v-if=&quot;state.user&quot;&gt;&#10;        &lt;img :src=&quot;state.user.avatar||'/default-avatar.png'&quot; class=&quot;avatar me-2&quot; alt=&quot;头像&quot;/&gt;&#10;        &lt;span class=&quot;me-3 text-white&quot;&gt;{{ state.user.username }}&lt;/span&gt;&#10;      &lt;/template&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/nav&gt;&#10;&lt;!-- Modern notification container --&gt;&#10;&lt;div class=&quot;notification-container&quot; id=&quot;notificationContainer&quot;&gt;&lt;/div&gt;&#10;&#10;&lt;!-- Legacy notification bar (kept for compatibility) --&gt;&#10;&lt;div id=&quot;notifyBar&quot; class=&quot;alert&quot;&gt;&lt;/div&gt;&#10;&lt;!-- 统一由 Vue 渲染 --&gt;&#10;&lt;!-- 用户主界面 --&gt;&#10;&lt;div id=&quot;mainPanel&quot; class=&quot;shadow centered p-1&quot;&gt;&#10;  &lt;div id=&quot;app&quot;&gt;&#10;    &lt;div class=&quot;d-flex justify-content-between align-items-center mb-3&quot;&gt;&#10;      &lt;div&gt;&#10;        &lt;!-- User avatar and username on the left --&gt;&#10;        &lt;template v-if=&quot;state.user&quot;&gt;&#10;          &lt;img :src=&quot;state.user.avatar||'/default-avatar.png'&quot; class=&quot;avatar me-2&quot; alt=&quot;头像&quot;/&gt;&#10;          &lt;span class=&quot;me-2&quot;&gt;{{ state.user.username }}&lt;/span&gt;&#10;        &lt;/template&gt;&#10;      &lt;/div&gt;&#10;      &lt;div&gt;&#10;        &lt;!-- Navigation buttons on the right --&gt;&#10;        &lt;template v-if=&quot;state.user&quot;&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;setView('activities')&quot;&gt;活动报名&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;openPublish()&quot;&gt;发布活动&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;state.view='myact'&quot;&gt;我的活动&lt;/button&gt;&#10;          &lt;button v-if=&quot;state.user.role === 'admin'&quot; class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;setView('activityManagement')&quot;&gt;活动管理&lt;/button&gt;&#10;          &lt;button v-if=&quot;state.user.role === 'admin'&quot; class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;setView('userManagement')&quot;&gt;用户管理&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;state.view='myreg'&quot;&gt;我的报名&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-primary me-2 tw-transition&quot; @click=&quot;state.view='user'&quot;&gt;我的信息&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-danger tw-transition&quot; @click=&quot;logout&quot;&gt;退出&lt;/button&gt;&#10;        &lt;/template&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 首页 Hero 欢迎横幅：在 welcome 或 activities 视图显示 --&gt;&#10;    &lt;div class=&quot;hero-banner&quot; v-if=&quot;(state.view==='welcome' )&quot;&gt;&#10;      &lt;div class=&quot;d-flex justify-content-between align-items-center flex-wrap&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;div class=&quot;hero-title&quot;&gt;欢迎来到 校园活动报名系统&lt;/div&gt;&#10;          &lt;div class=&quot;hero-sub&quot;&gt;发现并参与最新的校园活动 —— 简单、快捷、安全。&lt;/div&gt;&#10;          &lt;div class=&quot;hero-ctas mt-3 d-flex gap-2&quot;&gt;&#10;            &lt;button v-if=&quot;state.user&quot; class=&quot;ant-btn ant-btn-primary ant-btn-lg&quot; @click=&quot;state.view='publish'&quot;&gt;发布活动&lt;/button&gt;&#10;            &lt;template v-else&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-default ant-btn-lg&quot; @click=&quot;state.view='register'&quot;&gt;注册账号&lt;/button&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-primary ant-btn-lg&quot; @click=&quot;state.view='login'&quot;&gt;登录&lt;/button&gt;&#10;            &lt;/template&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动列表卡片形式 --&gt;&#10;    &lt;div v-if=&quot;(state.view==='activities' || !state.view) &amp;&amp; state.user&quot;&gt;&#10;      &lt;div class=&quot;card&quot;&gt;&#10;        &lt;div class=&quot;card-header&quot;&gt;&#10;          &lt;h5 class=&quot;mb-0&quot;&gt;活动列表&lt;/h5&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;card-body&quot;&gt;&#10;          &lt;!-- 新增：搜索/筛选与列表并排布局 --&gt;&#10;          &lt;div class=&quot;row&quot;&gt;&#10;            &lt;!-- 筛选面板（左侧） --&gt;&#10;            &lt;div class=&quot;col-12 col-md-4 col-lg-3 mb-3&quot;&gt;&#10;              &lt;div class=&quot;ant-card p-3&quot;&gt;&#10;                &lt;h6 class=&quot;mb-3&quot;&gt;筛选活动&lt;/h6&gt;&#10;                &lt;div class=&quot;mb-2&quot;&gt;&#10;                  &lt;label class=&quot;form-label&quot;&gt;开始时间&lt;/label&gt;&#10;                  &lt;input type=&quot;datetime-local&quot; class=&quot;form-control&quot; v-model=&quot;filters.startTime&quot; /&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;mb-2&quot;&gt;&#10;                  &lt;label class=&quot;form-label&quot;&gt;结束时间&lt;/label&gt;&#10;                  &lt;input type=&quot;datetime-local&quot; class=&quot;form-control&quot; v-model=&quot;filters.endTime&quot; /&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;mb-2&quot;&gt;&#10;                  &lt;label class=&quot;form-label&quot;&gt;地点&lt;/label&gt;&#10;                  &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;例如：教学楼、礼堂&quot; v-model=&quot;filters.location&quot; /&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;mb-2&quot;&gt;&#10;                  &lt;label class=&quot;form-label&quot;&gt;发布者&lt;/label&gt;&#10;                  &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;用户名或ID&quot; v-model=&quot;filters.publisher&quot; /&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;form-check mb-3&quot;&gt;&#10;                  &lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; id=&quot;hasAvailable&quot; v-model=&quot;filters.hasAvailable&quot;&gt;&#10;                  &lt;label class=&quot;form-check-label&quot; for=&quot;hasAvailable&quot;&gt;仅显示有空余名额的活动&lt;/label&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;d-flex gap-2&quot;&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-primary flex-grow-1&quot; @click=&quot;applyFilters&quot;&gt;搜索&lt;/button&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-default flex-grow-1&quot; @click=&quot;resetFilters&quot;&gt;重置&lt;/button&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;!-- 列表区域（右侧） --&gt;&#10;            &lt;div class=&quot;col-12 col-md-8 col-lg-9&quot;&gt;&#10;              &lt;!-- 网格布局显示活动 --&gt;&#10;              &lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;&#10;                &lt;div class=&quot;activity-card ant-card-hoverable rounded-xl overflow-hidden&quot; v-for=&quot;a in activities&quot; :key=&quot;a.activityId&quot;&gt;&#10;                  &lt;div class=&quot;p-5 h-full flex flex-col bg-white&quot;&gt;&#10;                    &lt;div class=&quot;d-flex justify-content-between align-items-start mb-2&quot;&gt;&#10;                      &lt;h5 class=&quot;text-indigo-600 font-bold text-lg m-0&quot;&gt;{{ a.activityName }}&lt;/h5&gt;&#10;                      &lt;span :class=&quot;getActivityStatusClass(a.status)&quot; class=&quot;badge&quot;&gt;{{ getActivityStatusText(a.status) }}&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;flex-grow&quot;&gt;&#10;                      &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                        &lt;i class=&quot;far fa-calendar-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                        时间：{{ (a.startTime||'').replace('T',' ') }} ~ {{ (a.endTime||'').replace('T',' ') }}&#10;                      &lt;/p&gt;&#10;                      &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-map-marker-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                        地点：{{ a.location }}&#10;                      &lt;/p&gt;&#10;                      &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-user mr-2&quot;&gt;&lt;/i&gt;&#10;                        发布者：{{ a.publisherName || a.publisherId }}&#10;                      &lt;/p&gt;&#10;                      &lt;p class=&quot;text-gray-500 text-sm mb-2 d-flex align-items-center justify-content-between&quot;&gt;&#10;                        &lt;span&gt;&lt;i class=&quot;fas fa-users mr-2&quot;&gt;&lt;/i&gt; 人数：{{ a.count||0 }}/{{ a.maxNum||0 }}&lt;/span&gt;&#10;                        &lt;small class=&quot;text-muted&quot;&gt;ID: {{ a.activityId }}&lt;/small&gt;&#10;                      &lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;flex justify-between mt-4 space-x-2&quot;&gt;&#10;                      &lt;button &#10;                        class=&quot;flex-1 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot;&#10;                        @click=&quot;showActivityDetail(a)&quot;&#10;                      &gt;&#10;                        查看详情&#10;                      &lt;/button&gt;&#10;                      &lt;button &#10;                        class=&quot;flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; &#10;                        @click=&quot;apply(a.activityId, a.maxNum, a.count)&quot;&#10;                        :disabled=&quot;a.status !== 'approved'&quot;&gt;&#10;                        报名&#10;                      &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;&#10;              &lt;!-- 无数据提示 --&gt;&#10;              &lt;div v-if=&quot;activities.length === 0&quot; class=&quot;text-center text-muted py-4&quot;&gt;&#10;                暂无活动&#10;              &lt;/div&gt;&#10;&#10;              &lt;!-- 活动列表分页控件 --&gt;&#10;              &lt;div class=&quot;pagination-container mt-4&quot; v-if=&quot;!searching &amp;&amp; activityPagination.totalPages &gt; 1&quot;&gt;&#10;                &lt;nav aria-label=&quot;活动列表分页&quot;&gt;&#10;                  &lt;ul class=&quot;pagination justify-content-center&quot;&gt;&#10;                    &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: activityPagination.page &lt;= 1 }&quot;&gt;&#10;                      &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadActivitiesWithPagination(activityPagination.page - 1, activityPagination.pageSize)&quot;&gt;上一页&lt;/a&gt;&#10;                    &lt;/li&gt;&#10;&#10;                    &lt;li class=&quot;page-item&quot; v-for=&quot;n in getPageNumbers()&quot; :key=&quot;n&quot; :class=&quot;{ active: n === activityPagination.page }&quot;&gt;&#10;                      &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadActivitiesWithPagination(n, activityPagination.pageSize)&quot;&gt;{{ n }}&lt;/a&gt;&#10;                    &lt;/li&gt;&#10;&#10;                    &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: activityPagination.page &gt;= activityPagination.totalPages }&quot;&gt;&#10;                      &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadActivitiesWithPagination(activityPagination.page + 1, activityPagination.pageSize)&quot;&gt;下一页&lt;/a&gt;&#10;                    &lt;/li&gt;&#10;                  &lt;/ul&gt;&#10;                &lt;/nav&gt;&#10;&#10;                &lt;div class=&quot;text-center text-muted small&quot;&gt;&#10;                  共 {{ activityPagination.total }} 条记录，第 {{ activityPagination.page }} / {{ activityPagination.totalPages }} 页&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动管理列表 --&gt;&#10;    &lt;div v-if=&quot;state.view==='activityManagement' &amp;&amp; state.user &amp;&amp; state.user.role === 'admin'&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-orange-500 font-bold text-lg&quot;&gt;活动管理&lt;/h5&gt;&#10;      &lt;div v-if=&quot;pendingActivities.length===0&quot; class=&quot;text-muted p-4 text-center bg-white rounded&quot;&gt;暂无活动&lt;/div&gt;&#10;      &lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4&quot;&gt;&#10;        &lt;div class=&quot;activity-card ant-card-hoverable rounded-xl overflow-hidden&quot; v-for=&quot;a in pendingActivities&quot; :key=&quot;a.activityId&quot;&gt;&#10;          &lt;div class=&quot;p-5 h-full flex flex-col bg-white&quot;&gt;&#10;            &lt;h5 class=&quot;text-indigo-600 font-bold text-lg mb-3&quot;&gt;{{ a.activityName }}&lt;/h5&gt;&#10;            &lt;div class=&quot;flex-grow&quot;&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;far fa-calendar-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                时间：{{ (a.startTime||'').replace('T',' ') }} ~ {{ (a.endTime||'').replace('T',' ') }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;fas fa-map-marker-alt mr-2&quot;&gt;&lt;/i&gt;&#10;                地点：{{ a.location }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;fas fa-users mr-2&quot;&gt;&lt;/i&gt;&#10;                人数：{{ a.count||0 }}/{{ a.maxNum||0 }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-2&quot;&gt;&#10;                &lt;i class=&quot;fas fa-user mr-2&quot;&gt;&lt;/i&gt;&#10;                发布者：{{ a.publisherName || a.publisherId }}&#10;              &lt;/p&gt;&#10;              &lt;p class=&quot;text-gray-500 text-sm mb-3&quot;&gt;&#10;                &lt;i class=&quot;fas fa-info-circle mr-2&quot;&gt;&lt;/i&gt;&#10;                状态：&#10;                &lt;span v-if=&quot;a.status === 'pending'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;待审核&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;a.status === 'approved'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;flex justify-between mt-4 space-x-2&quot;&gt;&#10;              &lt;button &#10;                class=&quot;flex-1 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot;&#10;                @click=&quot;showActivityDetail(a)&quot;&#10;              &gt;&#10;                查看详情&#10;              &lt;/button&gt;&#10;              &lt;div class=&quot;flex space-x-2&quot;&gt;&#10;                &lt;button v-if=&quot;a.status === 'pending'&quot; class=&quot;flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; @click=&quot;reviewActivity(a.activityId, 'approved')&quot;&gt;通过&lt;/button&gt;&#10;                &lt;button v-if=&quot;a.status === 'pending'&quot; class=&quot;flex-1 bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; @click=&quot;reviewActivity(a.activityId, 'rejected')&quot;&gt;拒绝&lt;/button&gt;&#10;                &lt;button class=&quot;flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-3 rounded-lg transition duration-200 ease-in-out transform hover:-translate-y-0.5&quot; @click=&quot;deleteActivity(a.activityId)&quot;&gt;删除&lt;/button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动详情页面 --&gt;&#10;    &lt;div class=&quot;activity-detail&quot; v-if=&quot;state.view==='activityDetail' &amp;&amp; selectedActivity&quot;&gt;&#10;      &lt;div class=&quot;d-flex justify-content-between align-items-center mb-3&quot;&gt;&#10;        &lt;h2 class=&quot;activity-title&quot;&gt;{{ selectedActivity.activityName }}&lt;/h2&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;backToPreviousView()&quot;&gt;&amp;laquo; 返回&lt;/button&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;活动ID:&lt;/strong&gt; {{ selectedActivity.activityId }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;活动时间:&lt;/strong&gt; {{ (selectedActivity.startTime||'').replace('T',' ') }} ~ {{ (selectedActivity.endTime||'').replace('T',' ') }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;活动地点:&lt;/strong&gt; {{ selectedActivity.location }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;报名人数:&lt;/strong&gt; {{ selectedActivity.count||0 }}/{{ selectedActivity.maxNum||0 }}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;activity-info&quot;&gt;&#10;        &lt;strong&gt;发布者:&lt;/strong&gt; {{ selectedActivity.publisherName || selectedActivity.publisherId }}&#10;      &lt;/div&gt;&#10;&#10;&lt;!--      &lt;div class=&quot;activity-info&quot;&gt;--&gt;&#10;&lt;!--        &lt;strong&gt;状态:&lt;/strong&gt; --&gt;&#10;&lt;!--        &lt;span v-if=&quot;selectedActivity.status === 'pending'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;待审核&lt;/span&gt;--&gt;&#10;&lt;!--        &lt;span v-else-if=&quot;selectedActivity.status === 'approved'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;--&gt;&#10;&lt;!--        &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;--&gt;&#10;&lt;!--      &lt;/div&gt;--&gt;&#10;&#10;      &lt;div class=&quot;activity-description&quot;&gt;&#10;        &lt;h5&gt;活动简介&lt;/h5&gt;&#10;        &lt;p&gt;{{ selectedActivity.description }}&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;flex gap-2 mt-3&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-success&quot; @click=&quot;apply(selectedActivity.activityId, selectedActivity.maxNum, selectedActivity.count)&quot; :disabled=&quot;selectedActivity.status !== 'approved'&quot;&gt;报名参加&lt;/button&gt;&#10;        &lt;div v-if=&quot;state.user &amp;&amp; state.user.role === 'admin' &amp;&amp; selectedActivity.status === 'pending'&quot;&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-success mr-1&quot; @click=&quot;reviewActivity(selectedActivity.activityId, 'approved')&quot;&gt;通过&lt;/button&gt;&#10;          &lt;button class=&quot;ant-btn ant-btn-danger&quot; @click=&quot;reviewActivity(selectedActivity.activityId, 'rejected')&quot;&gt;拒绝&lt;/button&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 用户管理界面 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='userManagement' &amp;&amp; state.user &amp;&amp; state.user.role === 'admin'&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-blue-500 font-bold text-lg&quot;&gt;用户管理&lt;/h5&gt;&#10;      &#10;      &lt;!-- 搜索框 --&gt;&#10;      &lt;div class=&quot;card mb-4&quot;&gt;&#10;        &lt;div class=&quot;card-body&quot;&gt;&#10;          &lt;div class=&quot;row g-2&quot;&gt;&#10;            &lt;div class=&quot;col-md-4&quot;&gt;&#10;              &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;输入用户名进行搜索&quot; v-model=&quot;searchKeyword&quot; @keyup.enter=&quot;searchUsers&quot;&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;col-md-2&quot;&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;searchUsers&quot;&gt;搜索&lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;col-md-2&quot;&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;resetSearch&quot;&gt;重置&lt;/button&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &#10;      &lt;!-- 用户列表 --&gt;&#10;      &lt;div class=&quot;card&quot;&gt;&#10;        &lt;div class=&quot;card-header&quot;&gt;&#10;          &lt;h6 class=&quot;mb-0&quot;&gt;用户列表&lt;/h6&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;card-body&quot;&gt;&#10;          &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;            &lt;table class=&quot;table table-bordered text-center align-middle&quot;&gt;&#10;              &lt;thead&gt;&#10;                &lt;tr&gt;&#10;                  &lt;th&gt;用户ID&lt;/th&gt;&#10;                  &lt;th&gt;用户名&lt;/th&gt;&#10;                  &lt;th&gt;邮箱&lt;/th&gt;&#10;                  &lt;th&gt;角色&lt;/th&gt;&#10;                &lt;/tr&gt;&#10;              &lt;/thead&gt;&#10;              &lt;tbody&gt;&#10;                &lt;tr v-for=&quot;user in userList&quot; :key=&quot;user.userId&quot; &#10;                    @click=&quot;selectUser(user)&quot; &#10;                    :class=&quot;{ 'table-primary': selectedUser &amp;&amp; selectedUser.userId === user.userId }&quot;&#10;                    style=&quot;cursor: pointer;&quot;&gt;&#10;                  &lt;td&gt;{{ user.userId }}&lt;/td&gt;&#10;                  &lt;td&gt;{{ user.username }}&lt;/td&gt;&#10;                  &lt;td&gt;{{ user.email }}&lt;/td&gt;&#10;                  &lt;td&gt;&#10;                    &lt;span v-if=&quot;user.role === 'admin'&quot; class=&quot;bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;管理员&lt;/span&gt;&#10;                    &lt;span v-else class=&quot;bg-gray-100 text-gray-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;普通用户&lt;/span&gt;&#10;                  &lt;/td&gt;&#10;                &lt;/tr&gt;&#10;              &lt;/tbody&gt;&#10;            &lt;/table&gt;&#10;            &#10;            &lt;!-- 无数据提示 --&gt;&#10;            &lt;div v-if=&quot;userList.length === 0&quot; class=&quot;text-center text-muted py-4&quot;&gt;&#10;              暂无用户数据&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 操作按钮 --&gt;&#10;          &lt;div class=&quot;mt-3 d-flex justify-content-between&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;button class=&quot;ant-btn ant-btn-danger&quot; &#10;                      :disabled=&quot;!selectedUser&quot; &#10;                      @click=&quot;confirmDeleteUser&quot;&gt;&#10;                &lt;i class=&quot;fas fa-trash-alt me-1&quot;&gt;&lt;/i&gt;删除用户&#10;              &lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;span v-if=&quot;selectedUser&quot; class=&quot;text-muted small&quot;&gt;&#10;                已选中: {{ selectedUser.username }} (ID: {{ selectedUser.userId }})&#10;              &lt;/span&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 角色修改区域 --&gt;&#10;          &lt;div class=&quot;mt-3 p-3 bg-light rounded&quot; v-if=&quot;selectedUser&quot;&gt;&#10;            &lt;div class=&quot;row g-2 align-items-center&quot;&gt;&#10;              &lt;div class=&quot;col-md-3&quot;&gt;&#10;                &lt;label class=&quot;form-label small mb-0&quot;&gt;当前角色:&lt;/label&gt;&#10;                &lt;input type=&quot;text&quot; class=&quot;form-control form-control-sm&quot; &#10;                       :value=&quot;selectedUser.role === 'admin' ? '管理员' : '普通用户'&quot; &#10;                       readonly&gt;&#10;              &lt;/div&gt;&#10;              &lt;div class=&quot;col-md-3&quot;&gt;&#10;                &lt;label class=&quot;form-label small mb-0&quot;&gt;新角色:&lt;/label&gt;&#10;                &lt;select class=&quot;form-control form-control-sm&quot; &#10;                        v-model=&quot;newRole&quot; &#10;                        :disabled=&quot;selectedUser.userId === state.user.userId&quot;&gt;&#10;                  &lt;option value=&quot;user&quot;&gt;普通用户&lt;/option&gt;&#10;                  &lt;option value=&quot;admin&quot;&gt;管理员&lt;/option&gt;&#10;                &lt;/select&gt;&#10;              &lt;/div&gt;&#10;              &lt;div class=&quot;col-md-3&quot;&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-primary ant-btn-sm mt-4&quot; &#10;                        :disabled=&quot;!selectedUser || newRole === selectedUser.role || selectedUser.userId === state.user.userId&quot;&#10;                        @click=&quot;confirmUpdateRole&quot;&gt;&#10;                  确认修改&#10;                &lt;/button&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mt-2 small text-warning&quot; v-if=&quot;selectedUser &amp;&amp; selectedUser.userId === state.user.userId&quot;&gt;&#10;              &lt;i class=&quot;fas fa-exclamation-circle me-1&quot;&gt;&lt;/i&gt;不能修改自己的角色&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &#10;          &lt;!-- 分页控件 --&gt;&#10;          &lt;div class=&quot;pagination-container mt-4&quot; v-if=&quot;pagination.totalPages &gt; 1&quot;&gt;&#10;            &lt;nav aria-label=&quot;用户列表分页&quot;&gt;&#10;              &lt;ul class=&quot;pagination justify-content-center&quot;&gt;&#10;                &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: pagination.page &lt;= 1 }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadUserList(pagination.page - 1, pagination.pageSize)&quot;&gt;上一页&lt;/a&gt;&#10;                &lt;/li&gt;&#10;                &#10;                &lt;li class=&quot;page-item&quot; v-for=&quot;n in getPageNumbers()&quot; :key=&quot;n&quot; :class=&quot;{ active: n === pagination.page }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadUserList(n, pagination.pageSize)&quot;&gt;{{ n }}&lt;/a&gt;&#10;                &lt;/li&gt;&#10;                &#10;                &lt;li class=&quot;page-item&quot; :class=&quot;{ disabled: pagination.page &gt;= pagination.totalPages }&quot;&gt;&#10;                  &lt;a class=&quot;page-link&quot; href=&quot;javascript:void(0)&quot; @click=&quot;loadUserList(pagination.page + 1, pagination.pageSize)&quot;&gt;下一页&lt;/a&gt;&#10;                &lt;/li&gt;&#10;              &lt;/ul&gt;&#10;            &lt;/nav&gt;&#10;            &#10;            &lt;div class=&quot;text-center text-muted small&quot;&gt;&#10;              共 {{ pagination.total }} 条记录，第 {{ pagination.page }} / {{ pagination.totalPages }} 页&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &#10;    &lt;!-- 编辑用户模态框 --&gt;&#10;    &lt;div class=&quot;modal fade&quot; id=&quot;editUserModal&quot; tabindex=&quot;-1&quot; v-if=&quot;state.view==='userManagement' &amp;&amp; state.user &amp;&amp; state.user.role === 'admin'&quot;&gt;&#10;      &lt;div class=&quot;modal-dialog&quot;&gt;&#10;        &lt;div class=&quot;modal-content&quot;&gt;&#10;          &lt;div class=&quot;modal-header&quot;&gt;&#10;            &lt;h5 class=&quot;modal-title&quot;&gt;编辑用户&lt;/h5&gt;&#10;            &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;&#10;          &lt;/div&gt;&#10;          &lt;div class=&quot;modal-body&quot;&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;用户ID&lt;/label&gt;&#10;              &lt;input class=&quot;form-control&quot; v-model=&quot;editingUser.userId&quot; readonly&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;用户名&lt;/label&gt;&#10;              &lt;input class=&quot;form-control&quot; v-model=&quot;editingUser.username&quot;&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;邮箱&lt;/label&gt;&#10;              &lt;input class=&quot;form-control&quot; v-model=&quot;editingUser.email&quot;&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;mb-3&quot;&gt;&#10;              &lt;label class=&quot;form-label&quot;&gt;角色&lt;/label&gt;&#10;              &lt;select class=&quot;form-control&quot; v-model=&quot;editingUser.role&quot;&gt;&#10;                &lt;option value=&quot;user&quot;&gt;普通用户&lt;/option&gt;&#10;                &lt;option value=&quot;admin&quot;&gt;管理员&lt;/option&gt;&#10;              &lt;/select&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;          &lt;div class=&quot;modal-footer&quot;&gt;&#10;            &lt;button type=&quot;button&quot; class=&quot;ant-btn ant-btn-default&quot; data-bs-dismiss=&quot;modal&quot;&gt;取消&lt;/button&gt;&#10;            &lt;button type=&quot;button&quot; class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;updateUser&quot;&gt;保存&lt;/button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &#10;    &lt;!-- 首页 Hero 欢迎横幅 --&gt;&#10;    &lt;div class=&quot;hero-banner&quot; v-if=&quot;state.view==='login' || state.view==='register'&quot;&gt;&#10;      &lt;div class=&quot;d-flex justify-content-center align-items-center flex-wrap text-center&quot;&gt;&#10;        &lt;div class=&quot;w-100&quot;&gt;&#10;          &lt;div class=&quot;hero-title&quot;&gt;欢迎来到 校园活动报名系统&lt;/div&gt;&#10;          &lt;div class=&quot;hero-sub&quot;&gt;发现并参与最新的校园活动 —— 简单、快捷、安全。&lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 登录 --&gt;&#10;    &lt;div class=&quot;auth-card auth-minimal p-1&quot; v-if=&quot;state.view==='login'&quot;&gt;&#10;      &lt;div class=&quot;text-center mb-4&quot;&gt;&#10;        &lt;div class=&quot;auth-title fs-4 text-indigo-600 font-bold&quot;&gt;用户登录&lt;/div&gt;&#10;        &lt;div class=&quot;auth-subtitle small text-gray-500&quot;&gt;欢迎回来，请输入您的账户信息&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-3&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;用户名&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;loginForm.username&quot; placeholder=&quot;请输入用户名&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-4&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;密码&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;loginForm.password&quot; type=&quot;password&quot; placeholder=&quot;请输入密码&quot; @keyup.enter=&quot;doLogin&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-primary w-full auth-btn py-2 rounded-lg font-medium&quot; @click=&quot;doLogin&quot;&gt;登录&lt;/button&gt;&#10;      &lt;div class=&quot;text-center mt-3 small&quot;&gt;&#10;        还没有账户？ &lt;a href=&quot;javascript:void(0)&quot; class=&quot;link-muted&quot; @click=&quot;state.view='register'&quot;&gt;立即注册&lt;/a&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 注册 --&gt;&#10;    &lt;div class=&quot;auth-card centered p-4 mt-4&quot; v-if=&quot;state.view==='register'&quot;&gt;&#10;      &lt;div class=&quot;text-center mb-4&quot;&gt;&#10;        &lt;div class=&quot;auth-title fs-4 text-green-600 font-bold&quot;&gt;创建账户&lt;/div&gt;&#10;        &lt;div class=&quot;auth-subtitle small text-gray-500&quot;&gt;填写以下信息完成注册&lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-3&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;用户名&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;regForm.username&quot; placeholder=&quot;请输入用户名&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-3&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;密码&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;regForm.password&quot; type=&quot;password&quot; placeholder=&quot;请输入密码&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mb-4&quot;&gt;&#10;        &lt;label class=&quot;form-label text-gray-700 font-medium&quot;&gt;邮箱&lt;/label&gt;&#10;        &lt;input class=&quot;form-control auth-input mb-2&quot; v-model.trim=&quot;regForm.email&quot; type=&quot;email&quot; placeholder=&quot;请输入邮箱地址&quot;&gt;&#10;      &lt;/div&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-success w-full auth-btn py-2 rounded-lg font-medium&quot; @click=&quot;doRegister&quot;&gt;注册&lt;/button&gt;&#10;      &lt;div class=&quot;text-center mt-3 small&quot;&gt;&#10;        已有账号？ &lt;a href=&quot;javascript:void(0)&quot; class=&quot;link-muted&quot; @click=&quot;state.view='login'&quot;&gt;去登录&lt;/a&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 我的信息 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4 profile-card&quot; v-if=&quot;state.view==='user' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3&quot;&gt;我的信息&lt;/h5&gt;&#10;      &lt;div class=&quot;d-flex align-items-center gap-3 mb-3&quot;&gt;&#10;        &lt;img :src=&quot;profile.avatar&quot; class=&quot;avatar&quot; alt=&quot;头像&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;div style=&quot;font-weight:700;font-size:1.05rem;color:#212529&quot;&gt;{{ profile.username || state.user.username }}&lt;/div&gt;&#10;          &lt;div class=&quot;small text-muted&quot;&gt;角色: {{ state.user.role === 'admin' ? '管理员' : '普通用户' }}&lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div style=&quot;margin-left:auto;display:flex;flex-direction:column;align-items:flex-end;gap:6px&quot;&gt;&#10;          &lt;label for=&quot;avatarFile&quot; class=&quot;ant-btn ant-btn-primary&quot; style=&quot;cursor:pointer&quot;&gt;上传头像&lt;/label&gt;&#10;          &lt;small class=&quot;text-muted&quot;&gt;支持 JPG/PNG，最大 2MB&lt;/small&gt;&#10;          &lt;input id=&quot;avatarFile&quot; type=&quot;file&quot; accept=&quot;image/*&quot; style=&quot;position:absolute;left:-9999px;&quot; aria-label=&quot;上传头像文件&quot; @change=&quot;uploadAvatar($event)&quot;&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;mb-3 profile-field&quot;&gt;&#10;        &lt;label class=&quot;form-label&quot;&gt;用户ID&lt;/label&gt;&#10;        &lt;input class=&quot;form-control profile-input&quot; :value=&quot;state.user.userId&quot; readonly&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;mb-3 profile-field&quot;&gt;&#10;        &lt;label class=&quot;form-label&quot;&gt;用户名&lt;/label&gt;&#10;        &lt;input class=&quot;form-control profile-input&quot; v-model.trim=&quot;profile.username&quot; placeholder=&quot;用户名&quot;&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;mb-3 profile-field&quot;&gt;&#10;        &lt;label class=&quot;form-label&quot;&gt;注册邮箱&lt;/label&gt;&#10;        &lt;input class=&quot;form-control profile-input&quot; :value=&quot;profile.email&quot; readonly&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div class=&quot;profile-actions&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;updateInfo&quot;&gt;保存信息&lt;/button&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;state.view='pwd'&quot;&gt;修改密码&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 修改密码 --&gt;&#10;    &lt;!-- 发布/编辑活动 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='publish' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3&quot; v-text=&quot;pubForm.activityId ? '编辑活动' : '发布新活动'&quot;&gt;&lt;/h5&gt;&#10;      &lt;label class=&quot;form-label small text-muted&quot;&gt;活动名称&lt;/label&gt;&#10;      &lt;input class=&quot;form-control mb-2&quot; v-model.trim=&quot;pubForm.name&quot; placeholder=&quot;活动名称&quot;&gt;&#10;      &lt;label class=&quot;form-label small text-muted&quot;&gt;活动简介&lt;/label&gt;&#10;      &lt;input class=&quot;form-control mb-2&quot; v-model.trim=&quot;pubForm.desc&quot; placeholder=&quot;活动简介&quot;&gt;&#10;      &lt;label class=&quot;form-label small text-muted&quot;&gt;活动地点&lt;/label&gt;&#10;      &lt;input class=&quot;form-control mb-2&quot; v-model.trim=&quot;pubForm.location&quot; placeholder=&quot;活动地点&quot;&gt;&#10;      &lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-2&quot;&gt;&#10;        &lt;div&gt;&#10;          &lt;label class=&quot;form-label small text-muted&quot;&gt;开始时间&lt;/label&gt;&#10;          &lt;input type=&quot;datetime-local&quot; class=&quot;form-control&quot; v-model=&quot;pubForm.startTime&quot; /&gt;&#10;        &lt;/div&gt;&#10;        &lt;div&gt;&#10;          &lt;label class=&quot;form-label small text-muted&quot;&gt;结束时间&lt;/label&gt;&#10;          &lt;input type=&quot;datetime-local&quot; class=&quot;form-control&quot; v-model=&quot;pubForm.endTime&quot; /&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;      &lt;label class=&quot;form-label small text-muted mt-2&quot;&gt;最大人数&lt;/label&gt;&#10;      &lt;input type=&quot;number&quot; min=&quot;1&quot; class=&quot;form-control mb-3&quot; v-model.number=&quot;pubForm.maxNum&quot; placeholder=&quot;如：50&quot; /&gt;&#10;      &lt;div class=&quot;flex gap-2&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-primary flex-grow-1&quot; @click=&quot;submitPublish&quot;&gt;提交&lt;/button&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;cancelPublish&quot;&gt;返回&lt;/button&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;mt-2 small text-danger&quot; v-if=&quot;pubFormMsg&quot;&gt;{{ pubFormMsg }}&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 我的活动 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='myact' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-green-600&quot;&gt;我发布的活动&lt;/h5&gt;&#10;      &lt;div v-if=&quot;myActs.length===0&quot; class=&quot;text-muted&quot;&gt;你还没有发布活动&lt;/div&gt;&#10;      &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;        &lt;table class=&quot;table table-striped text-center align-middle&quot;&gt;&#10;          &lt;thead&gt;&lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;名称&lt;/th&gt;&lt;th&gt;简介&lt;/th&gt;&lt;th&gt;状态&lt;/th&gt;&lt;th&gt;操作&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;tr v-for=&quot;a in myActs&quot; :key=&quot;a.activityId&quot;&gt;&#10;              &lt;td&gt;&lt;code&gt;{{ a.activityId.slice(0,8) }}&lt;/code&gt;&lt;/td&gt;&#10;              &lt;td&gt;{{ a.activityName }}&lt;/td&gt;&#10;              &lt;td&gt;{{ a.description }}&lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;span v-if=&quot;a.status === 'pending'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;待审核&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;a.status === 'approved'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/td&gt;&#10;              &lt;td&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-primary ant-btn-sm mr-1&quot; @click=&quot;showActivityDetail(activities.find(item =&gt; item.activityId === a.activityId))&quot;&gt;查看&lt;/button&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-default ant-btn-sm mr-1&quot; @click=&quot;editAct(a)&quot;&gt;编辑&lt;/button&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-warning ant-btn-sm mr-1&quot; @click=&quot;openManage(a.activityId)&quot;&gt;管理&lt;/button&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-danger ant-btn-sm&quot; @click=&quot;deleteAct(a.activityId)&quot;&gt;删除&lt;/button&gt;&#10;              &lt;/td&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 我的报名 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='myreg' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-blue-500&quot;&gt;我的报名&lt;/h5&gt;&#10;      &lt;div v-if=&quot;myRegs.length===0&quot; class=&quot;text-muted&quot;&gt;暂无报名记录&lt;/div&gt;&#10;      &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;        &lt;table class=&quot;table table-bordered text-center align-middle&quot;&gt;&#10;          &lt;thead&gt;&lt;tr&gt;&lt;th&gt;报名ID&lt;/th&gt;&lt;th&gt;活动ID&lt;/th&gt;&lt;th&gt;活动名称&lt;/th&gt;&lt;th&gt;状态&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;tr v-for=&quot;r in myRegs&quot; :key=&quot;r.registrationId&quot;&gt;&#10;              &lt;td&gt;&lt;code&gt;{{ r.username || r.userId }}&lt;/code&gt;&lt;/td&gt;&#10;              &lt;td&gt;&lt;a href=&quot;javascript:void(0)&quot; @click=&quot;viewActivityFromReg(r.activityId)&quot;&gt;{{ r.activityId.slice(0,8) }}&lt;/a&gt;&lt;/td&gt;&#10;              &lt;td&gt;{{ r.activityName }}&lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;span v-if=&quot;r.status === '已申请'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已申请&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;r.status === '已通过'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/td&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 活动报名管理 --&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='manage' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3 text-orange-500&quot;&gt;活动报名管理&lt;/h5&gt;&#10;      &lt;div class=&quot;input-group mb-3&quot;&gt;&#10;        &lt;span class=&quot;input-group-text&quot;&gt;活动ID&lt;/span&gt;&#10;        &lt;input class=&quot;form-control&quot; :value=&quot;manageState.activityId&quot; readonly /&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;input-group mb-3&quot;&gt;&#10;        &lt;input v-model.trim=&quot;manageState.addUserId&quot; class=&quot;form-control&quot; placeholder=&quot;输入用户ID添加报名&quot;&gt;&#10;        &lt;button class=&quot;ant-btn ant-btn-primary&quot; @click=&quot;addReg()&quot;&gt;添加&lt;/button&gt;&#10;      &lt;/div&gt;&#10;      &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;        &lt;table class=&quot;table align-middle&quot;&gt;&#10;          &lt;thead&gt;&lt;tr&gt;&lt;th&gt;报名ID&lt;/th&gt;&lt;th&gt;用户&lt;/th&gt;&lt;th&gt;状态&lt;/th&gt;&lt;th&gt;操作&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&#10;          &lt;tbody&gt;&#10;            &lt;tr v-for=&quot;r in manageState.regs&quot; :key=&quot;r.registrationId&quot;&gt;&#10;              &lt;td&gt;&lt;code&gt;{{ r.registrationId.slice(0,8) }}&lt;/code&gt;&lt;/td&gt;&#10;              &lt;td&gt;{{ r.username || r.userId }}&lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;span v-if=&quot;r.status === '已申请'&quot; class=&quot;bg-amber-100 text-amber-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已申请&lt;/span&gt;&#10;                &lt;span v-else-if=&quot;r.status === '已通过'&quot; class=&quot;bg-emerald-100 text-emerald-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已通过&lt;/span&gt;&#10;                &lt;span v-else class=&quot;bg-rose-100 text-rose-800 text-xs font-semibold px-2.5 py-0.5 rounded-full&quot;&gt;已拒绝&lt;/span&gt;&#10;              &lt;/td&gt;&#10;              &lt;td&gt;&#10;                &lt;template v-if=&quot;r.status==='已申请'&quot;&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-success ant-btn-sm mr-1&quot; @click=&quot;reviewReg(r.registrationId,1)&quot;&gt;通过&lt;/button&gt;&#10;                  &lt;button class=&quot;ant-btn ant-btn-danger ant-btn-sm mr-1&quot; @click=&quot;reviewReg(r.registrationId,0)&quot;&gt;拒绝&lt;/button&gt;&#10;                &lt;/template&gt;&#10;                &lt;button class=&quot;ant-btn ant-btn-danger ant-btn-sm&quot; @click=&quot;delReg(r.registrationId)&quot;&gt;删除&lt;/button&gt;&#10;              &lt;/td&gt;&#10;            &lt;/tr&gt;&#10;          &lt;/tbody&gt;&#10;        &lt;/table&gt;&#10;      &lt;/div&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;state.view='myact'&quot;&gt;返回我的活动&lt;/button&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;card shadow centered p-4 mt-4&quot; v-if=&quot;state.view==='pwd' &amp;&amp; state.user&quot;&gt;&#10;      &lt;h5 class=&quot;mb-3&quot;&gt;修改密码&lt;/h5&gt;&#10;      &lt;input type=&quot;password&quot; class=&quot;form-control mb-2&quot; v-model.trim=&quot;pwdForm.oldPwd&quot; placeholder=&quot;当前密码&quot;&gt;&#10;      &lt;input type=&quot;password&quot; class=&quot;form-control mb-2&quot; v-model.trim=&quot;pwdForm.newPwd&quot; placeholder=&quot;新密码&quot;&gt;&lt;button class=&quot;ant-btn ant-btn-default&quot; @click=&quot;cancelPublish&quot;&gt;返回&lt;/button&gt;&#10;      &lt;button class=&quot;ant-btn ant-btn-success w-full&quot; @click=&quot;changePwd&quot;&gt;提交修改&lt;/button&gt;&#10;    &lt;/div&gt;&#10;  &lt;/div&gt;&#10;&lt;/div&gt;&#10;&lt;script src=&quot;https://unpkg.com/vue@3/dist/vue.global.prod.js&quot;&gt;&lt;/script&gt;&#10;&lt;script src=&quot;app-main.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>